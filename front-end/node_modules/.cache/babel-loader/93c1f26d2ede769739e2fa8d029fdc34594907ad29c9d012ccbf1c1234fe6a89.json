{"ast":null,"code":"import _objectSpread from\"D:/raju new 1/front-end/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"D:/raju new 1/front-end/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27,_templateObject28,_templateObject29,_templateObject30,_templateObject31,_templateObject32,_templateObject33,_templateObject34,_templateObject35,_templateObject36;import React,{useState,useEffect,useCallback}from\"react\";import styled from\"styled-components\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));const Wrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n\"])));const Title=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-weight: 300;\\n  text-align: center;\\n\"])));const Top=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 20px;\\n\"])));const TopButton=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  padding: 10px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  border: \",\";\\n  background-color: \",\";\\n  color: \",\";\\n\"])),props=>props.type===\"filled\"&&\"none\",props=>props.type===\"filled\"?\"black\":\"transparent\",props=>props.type===\"filled\"&&\"white\");const TopTexts=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\"])));const TopText=styled.span(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  text-decoration: underline;\\n  cursor: pointer;\\n  margin: 0px 10px;\\n\"])));const Bottom=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n\"])));const Info=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  flex: 3;\\n\"])));const Product=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  margin-bottom: 20px;\\n\"])));const ProductDetail=styled.div(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  flex: 2;\\n  display: flex;\\n\"])));const Image=styled.img(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  width: 200px;\\n  height: 200px;\\n  object-fit: cover;\\n\"])));const Details=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-around;\\n\"])));const ProductName=styled.span(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  font-size: 18px;\\n  font-weight: 500;\\n\"])));const ProductId=styled.span(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  color: gray;\\n\"])));const PriceDetail=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n\"])));const ProductAmountContainer=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  margin-bottom: 20px;\\n\"])));const ProductAmount=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  font-size: 24px;\\n  margin: 5px 15px;\\n\"])));const ProductPrice=styled.div(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  font-size: 30px;\\n  font-weight: 200;\\n\"])));const Hr=styled.hr(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  background-color: #eee;\\n  border: none;\\n  height: 1px;\\n  margin: 20px 0;\\n\"])));const Summary=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  border: 0.5px solid lightgray;\\n  border-radius: 10px;\\n  padding: 20px;\\n  height: fit-content;\\n\"])));const SummaryTitle=styled.h1(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  font-weight: 200;\\n\"])));const SummaryItem=styled.div(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  margin: 30px 0px;\\n  display: flex;\\n  justify-content: space-between;\\n  font-weight: \",\";\\n  font-size: \",\";\\n\"])),props=>props.type===\"total\"&&\"500\",props=>props.type===\"total\"&&\"24px\");const SummaryItemText=styled.span(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\"])));const SummaryItemPrice=styled.span(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\"])));const Button=styled.button(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 10px;\\n  background-color: black;\\n  color: white;\\n  font-weight: 600;\\n  border: none;\\n  cursor: pointer;\\n  margin-top: 10px;\\n\"])));const QuantityButton=styled.button(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\\n  width: 30px;\\n  height: 30px;\\n  border: 1px solid teal;\\n  background-color: white;\\n  cursor: pointer;\\n  font-size: 18px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\"])));const EmptyCart=styled.div(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 50px;\\n  font-size: 18px;\\n  color: gray;\\n\"])));const FreeShippingBadge=styled.span(_templateObject27||(_templateObject27=_taggedTemplateLiteral([\"\\n  color: green;\\n  margin-left: 5px;\\n  font-size: 12px;\\n  font-weight: 600;\\n\"])));const AddressForm=styled.div(_templateObject28||(_templateObject28=_taggedTemplateLiteral([\"\\n  margin: 20px 0;\\n  padding: 20px;\\n  border: 1px solid #eee;\\n  border-radius: 10px;\\n  background-color: #f9f9f9;\\n\"])));const Input=styled.input(_templateObject29||(_templateObject29=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 10px;\\n  margin: 8px 0;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  font-size: 14px;\\n\"])));const InputRow=styled.div(_templateObject30||(_templateObject30=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 10px;\\n  \\n  @media (max-width: 768px) {\\n    flex-direction: column;\\n  }\\n\"])));const InputGroup=styled.div(_templateObject31||(_templateObject31=_taggedTemplateLiteral([\"\\n  flex: 1;\\n\"])));const PaymentModal=styled.div(_templateObject32||(_templateObject32=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  z-index: 1000;\\n\"])));const PaymentContent=styled.div(_templateObject33||(_templateObject33=_taggedTemplateLiteral([\"\\n  background: white;\\n  padding: 2rem;\\n  border-radius: 8px;\\n  width: 90%;\\n  max-width: 400px;\\n  text-align: center;\\n\"])));const PayNowBtn=styled.button(_templateObject34||(_templateObject34=_taggedTemplateLiteral([\"\\n  background: #4CAF50;\\n  color: white;\\n  padding: 12px 24px;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  margin: 5px;\\n\"])));const CancelBtn=styled.button(_templateObject35||(_templateObject35=_taggedTemplateLiteral([\"\\n  background: #f44336;\\n  color: white;\\n  padding: 12px 24px;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  margin: 5px;\\n\"])));const ErrorMessage=styled.div(_templateObject36||(_templateObject36=_taggedTemplateLiteral([\"\\n  color: #f44336;\\n  background-color: #ffebee;\\n  padding: 10px;\\n  border-radius: 4px;\\n  margin: 10px 0;\\n  font-size: 14px;\\n\"])));const CartPage=()=>{const[cartItems,setCartItems]=useState([]);const[loading,setLoading]=useState(false);const[isCheckingOut,setIsCheckingOut]=useState(false);const[showAddressForm,setShowAddressForm]=useState(false);const[showPayment,setShowPayment]=useState(false);const[paymentError,setPaymentError]=useState('');const navigate=useNavigate();const[address,setAddress]=useState({street:\"\",city:\"\",state:\"\",zipCode:\"\",country:\"\"});const getAuthHeader=()=>{const token=localStorage.getItem('token');return token?{Authorization:\"Bearer \".concat(token)}:{};};const getCurrentUser=()=>{const token=localStorage.getItem('token');if(token){try{const base64Payload=token.split('.')[1];const payload=JSON.parse(atob(base64Payload));return payload.userId;}catch(error){return null;}}return null;};// Smart Shipping Calculation\nconst calculateShipping=()=>{const subtotal=getTotal();// Free shipping for orders over $50\nif(subtotal>=50){return{shipping:0,hasFreeShipping:true};}else{// Add $5.90 shipping for orders under $50\nreturn{shipping:5.90,hasFreeShipping:false};}};// Calculate final total including shipping\nconst getFinalTotal=()=>{const shippingInfo=calculateShipping();return getTotal()+shippingInfo.shipping;};const fetchCart=useCallback(async()=>{const userId=getCurrentUser();if(!userId){setCartItems([]);return;}try{setLoading(true);const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/\").concat(userId),{headers:getAuthHeader()});setCartItems(response.data);}catch(error){console.error('Error fetching cart:',error);}finally{setLoading(false);}},[]);const updateCartItem=async(productId,quantity)=>{const userId=getCurrentUser();if(!userId)return;try{await axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/\").concat(userId),{productId,quantity},{headers:getAuthHeader()});await fetchCart();}catch(error){console.error('Error updating cart:',error);}};const removeFromCart=async productId=>{const userId=getCurrentUser();if(!userId)return;try{await axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/\").concat(userId,\"/\").concat(productId),{headers:getAuthHeader()});await fetchCart();}catch(error){console.error('Error removing from cart:',error);}};useEffect(()=>{fetchCart();},[fetchCart]);const handleQuantity=(productId,quantity)=>{if(quantity===0){removeFromCart(productId);}else{updateCartItem(productId,quantity);}};const getTotal=()=>{return cartItems.reduce((total,item)=>total+parseFloat(item.price)*item.quantity,0);};const handlePayment=async()=>{setPaymentError('');setIsCheckingOut(true);try{const userId=getCurrentUser();const token=localStorage.getItem('token');const BASE_URL=process.env.REACT_APP_API_URL;console.log('Using base URL:',BASE_URL);// Generate order data\nconst orderId=\"order_\".concat(userId,\"_\").concat(Date.now());const amount=Math.round(getFinalTotal()*100);// Convert to cents\nconsole.log('Creating payment intent for amount:',amount);// CALL ACTUAL PAYMENT CONTAINER\nconst paymentResponse=await axios.post(\"\".concat(BASE_URL,\"/api/payments/create-payment-intent\"),{orderId,amount},{headers:{Authorization:\"Bearer \".concat(token),'Content-Type':'application/json'},timeout:10000});console.log('Payment intent created:',paymentResponse.data);if(paymentResponse.data.clientSecret){// Confirm the payment (simulate success for now)\n// In production, you would integrate with Stripe.js Elements\nconst confirmResponse=await axios.post(\"\".concat(BASE_URL,\"/api/payments/confirm-payment\"),{paymentIntentId:paymentResponse.data.paymentIntentId},{headers:{Authorization:\"Bearer \".concat(token),'Content-Type':'application/json'}});console.log('Payment confirmed:',confirmResponse.data);if(confirmResponse.data.payment.status==='succeeded'){// Clear cart after successful payment\ntry{await axios.delete(\"\".concat(BASE_URL,\"/api/cart/\").concat(userId),{headers:{Authorization:\"Bearer \".concat(token)}});console.log('Cart cleared successfully');}catch(cartError){console.log('Cart clearing failed, but continuing...',cartError);}// Clear cart locally\nsetCartItems([]);// Show success and redirect\nalert(\"Payment successful! Order ID: \".concat(orderId));setShowPayment(false);navigate('/success');}else{setPaymentError('Payment failed. Please try again.');}}}catch(error){console.error('Payment error:',error);if(error.response){var _error$response$data;setPaymentError(\"Payment failed: \".concat(((_error$response$data=error.response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.response.statusText));}else if(error.request){setPaymentError('Payment service is not responding. Please try again later.');}else{setPaymentError('Payment failed: '+error.message);}}finally{setIsCheckingOut(false);}};const handleCheckout=()=>{if(cartItems.length===0){alert('Your cart is empty');return;}const token=localStorage.getItem('token');if(!token){alert('Please login to checkout');navigate('/login');return;}// Show address form if not shown yet\nif(!showAddressForm){setShowAddressForm(true);return;}// Validate address\nif(!address.street||!address.city||!address.state||!address.zipCode||!address.country){alert('Please fill in all address fields');return;}// Show payment modal\nsetShowPayment(true);};const handleInputChange=e=>{const{name,value}=e.target;setAddress(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleContinueShopping=()=>{navigate('/');};// Get shipping info for display\nconst shippingInfo=calculateShipping();if(loading){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:\"YOUR BAG\"}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'50px'},children:\"Loading cart...\"})]})});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:\"YOUR BAG\"}),/*#__PURE__*/_jsxs(Top,{children:[/*#__PURE__*/_jsx(TopButton,{onClick:handleContinueShopping,children:\"CONTINUE SHOPPING\"}),/*#__PURE__*/_jsxs(TopTexts,{children:[/*#__PURE__*/_jsxs(TopText,{children:[\"Shopping Bag(\",cartItems.length,\")\"]}),/*#__PURE__*/_jsx(TopText,{children:\"Your Wishlist (0)\"})]}),/*#__PURE__*/_jsx(TopButton,{type:\"filled\",onClick:handleCheckout,disabled:cartItems.length===0,children:isCheckingOut?'PROCESSING...':'CHECKOUT NOW'})]}),/*#__PURE__*/_jsxs(Bottom,{children:[/*#__PURE__*/_jsx(Info,{children:cartItems.length===0?/*#__PURE__*/_jsxs(EmptyCart,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Add some products to your cart to see them here\"}),/*#__PURE__*/_jsx(TopButton,{onClick:handleContinueShopping,style:{marginTop:'20px'},children:\"START SHOPPING\"})]}):cartItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Product,{children:[/*#__PURE__*/_jsxs(ProductDetail,{children:[/*#__PURE__*/_jsx(Image,{src:item.img||'https://via.placeholder.com/200x200?text=No+Image'}),/*#__PURE__*/_jsxs(Details,{children:[/*#__PURE__*/_jsxs(ProductName,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Product:\"}),\" \",item.title]}),/*#__PURE__*/_jsxs(ProductId,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"ID:\"}),\" \",item.productId]}),item.size&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Size:\"}),\" \",item.size]}),item.color&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Color:\"}),\" \",item.color]})]})]}),/*#__PURE__*/_jsxs(PriceDetail,{children:[/*#__PURE__*/_jsxs(ProductAmountContainer,{children:[/*#__PURE__*/_jsx(QuantityButton,{onClick:()=>handleQuantity(item.productId,item.quantity-1),children:\"-\"}),/*#__PURE__*/_jsx(ProductAmount,{children:item.quantity}),/*#__PURE__*/_jsx(QuantityButton,{onClick:()=>handleQuantity(item.productId,item.quantity+1),children:\"+\"})]}),/*#__PURE__*/_jsxs(ProductPrice,{children:[\"$ \",(parseFloat(item.price)*item.quantity).toFixed(2)]})]})]}),/*#__PURE__*/_jsx(Hr,{})]},item.id))}),cartItems.length>0&&/*#__PURE__*/_jsxs(Summary,{children:[/*#__PURE__*/_jsx(SummaryTitle,{children:\"ORDER SUMMARY\"}),/*#__PURE__*/_jsxs(SummaryItem,{children:[/*#__PURE__*/_jsx(SummaryItemText,{children:\"Subtotal\"}),/*#__PURE__*/_jsxs(SummaryItemPrice,{children:[\"$ \",getTotal().toFixed(2)]})]}),/*#__PURE__*/_jsxs(SummaryItem,{children:[/*#__PURE__*/_jsxs(SummaryItemText,{children:[\"Shipping\",shippingInfo.hasFreeShipping&&/*#__PURE__*/_jsx(FreeShippingBadge,{children:\"\\uD83D\\uDE9A FREE\"})]}),/*#__PURE__*/_jsx(SummaryItemPrice,{children:shippingInfo.hasFreeShipping?'$ 0.00':\"$ \".concat(shippingInfo.shipping.toFixed(2))})]}),!shippingInfo.hasFreeShipping&&/*#__PURE__*/_jsxs(SummaryItem,{children:[/*#__PURE__*/_jsxs(SummaryItemText,{style:{fontSize:'12px',color:'#666',fontStyle:'italic'},children:[\"Add $\",(50-getTotal()).toFixed(2),\" more for free shipping!\"]}),/*#__PURE__*/_jsx(SummaryItemPrice,{})]}),/*#__PURE__*/_jsxs(SummaryItem,{type:\"total\",children:[/*#__PURE__*/_jsx(SummaryItemText,{children:\"Total\"}),/*#__PURE__*/_jsxs(SummaryItemPrice,{children:[\"$ \",getFinalTotal().toFixed(2)]})]}),showAddressForm&&/*#__PURE__*/_jsxs(AddressForm,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shipping Address\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"street\",placeholder:\"Street Address\",value:address.street,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsxs(InputRow,{children:[/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"city\",placeholder:\"City\",value:address.city,onChange:handleInputChange,required:true})}),/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"state\",placeholder:\"State\",value:address.state,onChange:handleInputChange,required:true})})]}),/*#__PURE__*/_jsxs(InputRow,{children:[/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"zipCode\",placeholder:\"ZIP Code\",value:address.zipCode,onChange:handleInputChange,required:true})}),/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"country\",placeholder:\"Country\",value:address.country,onChange:handleInputChange,required:true})})]})]}),/*#__PURE__*/_jsx(Button,{onClick:handleCheckout,disabled:cartItems.length===0||isCheckingOut,children:isCheckingOut?'PROCESSING ORDER...':showAddressForm?'PROCEED TO PAYMENT':\"CHECKOUT NOW ($\".concat(getFinalTotal().toFixed(2),\")\")})]})]})]}),showPayment&&/*#__PURE__*/_jsx(PaymentModal,{children:/*#__PURE__*/_jsxs(PaymentContent,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Complete Your Purchase\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Amount: $\",getFinalTotal().toFixed(2)]}),paymentError&&/*#__PURE__*/_jsx(ErrorMessage,{children:paymentError}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PayNowBtn,{onClick:handlePayment,disabled:isCheckingOut,children:isCheckingOut?'Processing Payment...':'Pay Now'}),/*#__PURE__*/_jsx(CancelBtn,{onClick:()=>setShowPayment(false),children:\"Cancel\"})]})]})})]});};export default CartPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","styled","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","Wrapper","_templateObject2","Title","h1","_templateObject3","Top","_templateObject4","TopButton","button","_templateObject5","props","type","TopTexts","_templateObject6","TopText","span","_templateObject7","Bottom","_templateObject8","Info","_templateObject9","Product","_templateObject0","ProductDetail","_templateObject1","Image","img","_templateObject10","Details","_templateObject11","ProductName","_templateObject12","ProductId","_templateObject13","PriceDetail","_templateObject14","ProductAmountContainer","_templateObject15","ProductAmount","_templateObject16","ProductPrice","_templateObject17","Hr","hr","_templateObject18","Summary","_templateObject19","SummaryTitle","_templateObject20","SummaryItem","_templateObject21","SummaryItemText","_templateObject22","SummaryItemPrice","_templateObject23","Button","_templateObject24","QuantityButton","_templateObject25","EmptyCart","_templateObject26","FreeShippingBadge","_templateObject27","AddressForm","_templateObject28","Input","input","_templateObject29","InputRow","_templateObject30","InputGroup","_templateObject31","PaymentModal","_templateObject32","PaymentContent","_templateObject33","PayNowBtn","_templateObject34","CancelBtn","_templateObject35","ErrorMessage","_templateObject36","CartPage","cartItems","setCartItems","loading","setLoading","isCheckingOut","setIsCheckingOut","showAddressForm","setShowAddressForm","showPayment","setShowPayment","paymentError","setPaymentError","navigate","address","setAddress","street","city","state","zipCode","country","getAuthHeader","token","localStorage","getItem","Authorization","concat","getCurrentUser","base64Payload","split","payload","JSON","parse","atob","userId","error","calculateShipping","subtotal","getTotal","shipping","hasFreeShipping","getFinalTotal","shippingInfo","fetchCart","response","get","process","env","REACT_APP_API_URL","headers","data","console","updateCartItem","productId","quantity","put","removeFromCart","delete","handleQuantity","reduce","total","item","parseFloat","price","handlePayment","BASE_URL","log","orderId","Date","now","amount","Math","round","paymentResponse","post","timeout","clientSecret","confirmResponse","paymentIntentId","payment","status","cartError","alert","_error$response$data","statusText","request","message","handleCheckout","length","handleInputChange","e","name","value","target","prev","_objectSpread","handleContinueShopping","children","style","textAlign","padding","onClick","disabled","marginTop","map","src","title","size","color","toFixed","id","fontSize","fontStyle","placeholder","onChange","required"],"sources":["D:/raju new 1/front-end/src/pages/CartPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst Wrapper = styled.div`\r\n  padding: 20px;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-weight: 300;\r\n  text-align: center;\r\n`;\r\n\r\nconst Top = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20px;\r\n`;\r\n\r\nconst TopButton = styled.button`\r\n  padding: 10px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  border: ${(props) => props.type === \"filled\" && \"none\"};\r\n  background-color: ${(props) =>\r\n    props.type === \"filled\" ? \"black\" : \"transparent\"};\r\n  color: ${(props) => props.type === \"filled\" && \"white\"};\r\n`;\r\n\r\nconst TopTexts = styled.div``;\r\n\r\nconst TopText = styled.span`\r\n  text-decoration: underline;\r\n  cursor: pointer;\r\n  margin: 0px 10px;\r\n`;\r\n\r\nconst Bottom = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Info = styled.div`\r\n  flex: 3;\r\n`;\r\n\r\nconst Product = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst ProductDetail = styled.div`\r\n  flex: 2;\r\n  display: flex;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 200px;\r\n  height: 200px;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst Details = styled.div`\r\n  padding: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n`;\r\n\r\nconst ProductName = styled.span`\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst ProductId = styled.span`\r\n  color: gray;\r\n`;\r\n\r\nconst PriceDetail = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ProductAmountContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst ProductAmount = styled.div`\r\n  font-size: 24px;\r\n  margin: 5px 15px;\r\n`;\r\n\r\nconst ProductPrice = styled.div`\r\n  font-size: 30px;\r\n  font-weight: 200;\r\n`;\r\n\r\nconst Hr = styled.hr`\r\n  background-color: #eee;\r\n  border: none;\r\n  height: 1px;\r\n  margin: 20px 0;\r\n`;\r\n\r\nconst Summary = styled.div`\r\n  flex: 1;\r\n  border: 0.5px solid lightgray;\r\n  border-radius: 10px;\r\n  padding: 20px;\r\n  height: fit-content;\r\n`;\r\n\r\nconst SummaryTitle = styled.h1`\r\n  font-weight: 200;\r\n`;\r\n\r\nconst SummaryItem = styled.div`\r\n  margin: 30px 0px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-weight: ${(props) => props.type === \"total\" && \"500\"};\r\n  font-size: ${(props) => props.type === \"total\" && \"24px\"};\r\n`;\r\n\r\nconst SummaryItemText = styled.span``;\r\n\r\nconst SummaryItemPrice = styled.span``;\r\n\r\nconst Button = styled.button`\r\n  width: 100%;\r\n  padding: 10px;\r\n  background-color: black;\r\n  color: white;\r\n  font-weight: 600;\r\n  border: none;\r\n  cursor: pointer;\r\n  margin-top: 10px;\r\n`;\r\n\r\nconst QuantityButton = styled.button`\r\n  width: 30px;\r\n  height: 30px;\r\n  border: 1px solid teal;\r\n  background-color: white;\r\n  cursor: pointer;\r\n  font-size: 18px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst EmptyCart = styled.div`\r\n  text-align: center;\r\n  padding: 50px;\r\n  font-size: 18px;\r\n  color: gray;\r\n`;\r\n\r\nconst FreeShippingBadge = styled.span`\r\n  color: green;\r\n  margin-left: 5px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n`;\r\n\r\nconst AddressForm = styled.div`\r\n  margin: 20px 0;\r\n  padding: 20px;\r\n  border: 1px solid #eee;\r\n  border-radius: 10px;\r\n  background-color: #f9f9f9;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 10px;\r\n  margin: 8px 0;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n`;\r\n\r\nconst InputRow = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  \r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n  }\r\n`;\r\n\r\nconst InputGroup = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst PaymentModal = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst PaymentContent = styled.div`\r\n  background: white;\r\n  padding: 2rem;\r\n  border-radius: 8px;\r\n  width: 90%;\r\n  max-width: 400px;\r\n  text-align: center;\r\n`;\r\n\r\nconst PayNowBtn = styled.button`\r\n  background: #4CAF50;\r\n  color: white;\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin: 5px;\r\n`;\r\n\r\nconst CancelBtn = styled.button`\r\n  background: #f44336;\r\n  color: white;\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin: 5px;\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  color: #f44336;\r\n  background-color: #ffebee;\r\n  padding: 10px;\r\n  border-radius: 4px;\r\n  margin: 10px 0;\r\n  font-size: 14px;\r\n`;\r\n\r\nconst CartPage = () => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isCheckingOut, setIsCheckingOut] = useState(false);\r\n  const [showAddressForm, setShowAddressForm] = useState(false);\r\n  const [showPayment, setShowPayment] = useState(false);\r\n  const [paymentError, setPaymentError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const [address, setAddress] = useState({\r\n    street: \"\",\r\n    city: \"\",\r\n    state: \"\",\r\n    zipCode: \"\",\r\n    country: \"\"\r\n  });\r\n\r\n  const getAuthHeader = () => {\r\n    const token = localStorage.getItem('token');\r\n    return token ? { Authorization: `Bearer ${token}` } : {};\r\n  };\r\n\r\n  const getCurrentUser = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      try {\r\n        const base64Payload = token.split('.')[1];\r\n        const payload = JSON.parse(atob(base64Payload));\r\n        return payload.userId;\r\n      } catch (error) {\r\n        return null;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  // Smart Shipping Calculation\r\n  const calculateShipping = () => {\r\n    const subtotal = getTotal();\r\n    \r\n    // Free shipping for orders over $50\r\n    if (subtotal >= 50) {\r\n      return {\r\n        shipping: 0,\r\n        hasFreeShipping: true\r\n      };\r\n    } else {\r\n      // Add $5.90 shipping for orders under $50\r\n      return {\r\n        shipping: 5.90,\r\n        hasFreeShipping: false\r\n      };\r\n    }\r\n  };\r\n\r\n  // Calculate final total including shipping\r\n  const getFinalTotal = () => {\r\n    const shippingInfo = calculateShipping();\r\n    return getTotal() + shippingInfo.shipping;\r\n  };\r\n\r\n  const fetchCart = useCallback(async () => {\r\n    const userId = getCurrentUser();\r\n    if (!userId) {\r\n      setCartItems([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_API_URL}/api/cart/${userId}`,\r\n        { headers: getAuthHeader() }\r\n      );\r\n      setCartItems(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching cart:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const updateCartItem = async (productId, quantity) => {\r\n    const userId = getCurrentUser();\r\n    if (!userId) return;\r\n\r\n    try {\r\n      await axios.put(\r\n        `${process.env.REACT_APP_API_URL}/api/cart/${userId}`,\r\n        { productId, quantity },\r\n        { headers: getAuthHeader() }\r\n      );\r\n      await fetchCart();\r\n    } catch (error) {\r\n      console.error('Error updating cart:', error);\r\n    }\r\n  };\r\n\r\n  const removeFromCart = async (productId) => {\r\n    const userId = getCurrentUser();\r\n    if (!userId) return;\r\n\r\n    try {\r\n      await axios.delete(\r\n        `${process.env.REACT_APP_API_URL}/api/cart/${userId}/${productId}`,\r\n        { headers: getAuthHeader() }\r\n      );\r\n      await fetchCart();\r\n    } catch (error) {\r\n      console.error('Error removing from cart:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, [fetchCart]);\r\n\r\n  const handleQuantity = (productId, quantity) => {\r\n    if (quantity === 0) {\r\n      removeFromCart(productId);\r\n    } else {\r\n      updateCartItem(productId, quantity);\r\n    }\r\n  };\r\n\r\n  const getTotal = () => {\r\n    return cartItems.reduce((total, item) => total + parseFloat(item.price) * item.quantity, 0);\r\n  };\r\n\r\n  const handlePayment = async () => {\r\n    setPaymentError('');\r\n    setIsCheckingOut(true);\r\n\r\n    try {\r\n      const userId = getCurrentUser();\r\n      const token = localStorage.getItem('token');\r\n      \r\n      const BASE_URL = process.env.REACT_APP_API_URL;\r\n      console.log('Using base URL:', BASE_URL);\r\n\r\n      // Generate order data\r\n      const orderId = `order_${userId}_${Date.now()}`;\r\n      const amount = Math.round(getFinalTotal() * 100); // Convert to cents\r\n\r\n      console.log('Creating payment intent for amount:', amount);\r\n\r\n      // CALL ACTUAL PAYMENT CONTAINER\r\n      const paymentResponse = await axios.post(\r\n        `${BASE_URL}/api/payments/create-payment-intent`,\r\n        { \r\n          orderId, \r\n          amount \r\n        },\r\n        { \r\n          headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          timeout: 10000\r\n        }\r\n      );\r\n\r\n      console.log('Payment intent created:', paymentResponse.data);\r\n\r\n      if (paymentResponse.data.clientSecret) {\r\n        // Confirm the payment (simulate success for now)\r\n        // In production, you would integrate with Stripe.js Elements\r\n        const confirmResponse = await axios.post(\r\n          `${BASE_URL}/api/payments/confirm-payment`,\r\n          { \r\n            paymentIntentId: paymentResponse.data.paymentIntentId \r\n          },\r\n          { \r\n            headers: { \r\n              Authorization: `Bearer ${token}`,\r\n              'Content-Type': 'application/json'\r\n            } \r\n          }\r\n        );\r\n\r\n        console.log('Payment confirmed:', confirmResponse.data);\r\n\r\n        if (confirmResponse.data.payment.status === 'succeeded') {\r\n          // Clear cart after successful payment\r\n          try {\r\n            await axios.delete(\r\n              `${BASE_URL}/api/cart/${userId}`,\r\n              { \r\n                headers: { \r\n                  Authorization: `Bearer ${token}` \r\n                } \r\n              }\r\n            );\r\n            console.log('Cart cleared successfully');\r\n          } catch (cartError) {\r\n            console.log('Cart clearing failed, but continuing...', cartError);\r\n          }\r\n\r\n          // Clear cart locally\r\n          setCartItems([]);\r\n\r\n          // Show success and redirect\r\n          alert(`Payment successful! Order ID: ${orderId}`);\r\n          setShowPayment(false);\r\n          navigate('/success');\r\n        } else {\r\n          setPaymentError('Payment failed. Please try again.');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Payment error:', error);\r\n      \r\n      if (error.response) {\r\n        setPaymentError(`Payment failed: ${error.response.data?.error || error.response.statusText}`);\r\n      } else if (error.request) {\r\n        setPaymentError('Payment service is not responding. Please try again later.');\r\n      } else {\r\n        setPaymentError('Payment failed: ' + error.message);\r\n      }\r\n    } finally {\r\n      setIsCheckingOut(false);\r\n    }\r\n  };\r\n\r\n  const handleCheckout = () => {\r\n    if (cartItems.length === 0) {\r\n      alert('Your cart is empty');\r\n      return;\r\n    }\r\n    \r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      alert('Please login to checkout');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    // Show address form if not shown yet\r\n    if (!showAddressForm) {\r\n      setShowAddressForm(true);\r\n      return;\r\n    }\r\n\r\n    // Validate address\r\n    if (!address.street || !address.city || !address.state || !address.zipCode || !address.country) {\r\n      alert('Please fill in all address fields');\r\n      return;\r\n    }\r\n\r\n    // Show payment modal\r\n    setShowPayment(true);\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setAddress(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleContinueShopping = () => {\r\n    navigate('/');\r\n  };\r\n\r\n  // Get shipping info for display\r\n  const shippingInfo = calculateShipping();\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container>\r\n        <Wrapper>\r\n          <Title>YOUR BAG</Title>\r\n          <div style={{ textAlign: 'center', padding: '50px' }}>Loading cart...</div>\r\n        </Wrapper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Wrapper>\r\n        <Title>YOUR BAG</Title>\r\n        <Top>\r\n          <TopButton onClick={handleContinueShopping}>CONTINUE SHOPPING</TopButton>\r\n          <TopTexts>\r\n            <TopText>Shopping Bag({cartItems.length})</TopText>\r\n            <TopText>Your Wishlist (0)</TopText>\r\n          </TopTexts>\r\n          <TopButton \r\n            type=\"filled\" \r\n            onClick={handleCheckout}\r\n            disabled={cartItems.length === 0}\r\n          >\r\n            {isCheckingOut ? 'PROCESSING...' : 'CHECKOUT NOW'}\r\n          </TopButton>\r\n        </Top>\r\n        <Bottom>\r\n          <Info>\r\n            {cartItems.length === 0 ? (\r\n              <EmptyCart>\r\n                <h3>Your cart is empty</h3>\r\n                <p>Add some products to your cart to see them here</p>\r\n                <TopButton onClick={handleContinueShopping} style={{ marginTop: '20px' }}>\r\n                  START SHOPPING\r\n                </TopButton>\r\n              </EmptyCart>\r\n            ) : (\r\n              cartItems.map((item) => (\r\n                <div key={item.id}>\r\n                  <Product>\r\n                    <ProductDetail>\r\n                      <Image src={item.img || 'https://via.placeholder.com/200x200?text=No+Image'} />\r\n                      <Details>\r\n                        <ProductName>\r\n                          <b>Product:</b> {item.title}\r\n                        </ProductName>\r\n                        <ProductId>\r\n                          <b>ID:</b> {item.productId}\r\n                        </ProductId>\r\n                        {item.size && (\r\n                          <div>\r\n                            <b>Size:</b> {item.size}\r\n                          </div>\r\n                        )}\r\n                        {item.color && (\r\n                          <div>\r\n                            <b>Color:</b> {item.color}\r\n                          </div>\r\n                        )}\r\n                      </Details>\r\n                    </ProductDetail>\r\n                    <PriceDetail>\r\n                      <ProductAmountContainer>\r\n                        <QuantityButton onClick={() => handleQuantity(item.productId, item.quantity - 1)}>\r\n                          -\r\n                        </QuantityButton>\r\n                        <ProductAmount>{item.quantity}</ProductAmount>\r\n                        <QuantityButton onClick={() => handleQuantity(item.productId, item.quantity + 1)}>\r\n                          +\r\n                        </QuantityButton>\r\n                      </ProductAmountContainer>\r\n                      <ProductPrice>$ {(parseFloat(item.price) * item.quantity).toFixed(2)}</ProductPrice>\r\n                    </PriceDetail>\r\n                  </Product>\r\n                  <Hr />\r\n                </div>\r\n              ))\r\n            )}\r\n          </Info>\r\n          {cartItems.length > 0 && (\r\n            <Summary>\r\n              <SummaryTitle>ORDER SUMMARY</SummaryTitle>\r\n              <SummaryItem>\r\n                <SummaryItemText>Subtotal</SummaryItemText>\r\n                <SummaryItemPrice>$ {getTotal().toFixed(2)}</SummaryItemPrice>\r\n              </SummaryItem>\r\n              \r\n              <SummaryItem>\r\n                <SummaryItemText>\r\n                  Shipping\r\n                  {shippingInfo.hasFreeShipping && (\r\n                    <FreeShippingBadge>ðŸšš FREE</FreeShippingBadge>\r\n                  )}\r\n                </SummaryItemText>\r\n                <SummaryItemPrice>\r\n                  {shippingInfo.hasFreeShipping ? '$ 0.00' : `$ ${shippingInfo.shipping.toFixed(2)}`}\r\n                </SummaryItemPrice>\r\n              </SummaryItem>\r\n\r\n              {!shippingInfo.hasFreeShipping && (\r\n                <SummaryItem>\r\n                  <SummaryItemText style={{ fontSize: '12px', color: '#666', fontStyle: 'italic' }}>\r\n                    Add ${(50 - getTotal()).toFixed(2)} more for free shipping!\r\n                  </SummaryItemText>\r\n                  <SummaryItemPrice></SummaryItemPrice>\r\n                </SummaryItem>\r\n              )}\r\n\r\n              <SummaryItem type=\"total\">\r\n                <SummaryItemText>Total</SummaryItemText>\r\n                <SummaryItemPrice>$ {getFinalTotal().toFixed(2)}</SummaryItemPrice>\r\n              </SummaryItem>\r\n\r\n              {/* Address Form */}\r\n              {showAddressForm && (\r\n                <AddressForm>\r\n                  <h3>Shipping Address</h3>\r\n                  <Input\r\n                    type=\"text\"\r\n                    name=\"street\"\r\n                    placeholder=\"Street Address\"\r\n                    value={address.street}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                  />\r\n                  <InputRow>\r\n                    <InputGroup>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"city\"\r\n                        placeholder=\"City\"\r\n                        value={address.city}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                      />\r\n                    </InputGroup>\r\n                    <InputGroup>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"state\"\r\n                        placeholder=\"State\"\r\n                        value={address.state}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                      />\r\n                    </InputGroup>\r\n                  </InputRow>\r\n                  <InputRow>\r\n                    <InputGroup>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"zipCode\"\r\n                        placeholder=\"ZIP Code\"\r\n                        value={address.zipCode}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                      />\r\n                    </InputGroup>\r\n                    <InputGroup>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"country\"\r\n                        placeholder=\"Country\"\r\n                        value={address.country}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                      />\r\n                    </InputGroup>\r\n                  </InputRow>\r\n                </AddressForm>\r\n              )}\r\n\r\n              <Button \r\n                onClick={handleCheckout}\r\n                disabled={cartItems.length === 0 || isCheckingOut}\r\n              >\r\n                {isCheckingOut ? 'PROCESSING ORDER...' : \r\n                 showAddressForm ? 'PROCEED TO PAYMENT' : \r\n                 `CHECKOUT NOW ($${getFinalTotal().toFixed(2)})`}\r\n              </Button>\r\n            </Summary>\r\n          )}\r\n        </Bottom>\r\n      </Wrapper>\r\n\r\n      {/* Payment Modal */}\r\n      {showPayment && (\r\n        <PaymentModal>\r\n          <PaymentContent>\r\n            <h2>Complete Your Purchase</h2>\r\n            <p>Total Amount: ${getFinalTotal().toFixed(2)}</p>\r\n            \r\n            {paymentError && <ErrorMessage>{paymentError}</ErrorMessage>}\r\n            \r\n            <div>\r\n              <PayNowBtn \r\n                onClick={handlePayment} \r\n                disabled={isCheckingOut}\r\n              >\r\n                {isCheckingOut ? 'Processing Payment...' : 'Pay Now'}\r\n              </PayNowBtn>\r\n              <CancelBtn onClick={() => setShowPayment(false)}>\r\n                Cancel\r\n              </CancelBtn>\r\n            </div>\r\n          </PaymentContent>\r\n        </PaymentModal>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CartPage;"],"mappings":"64BAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,SAAS,CAAGP,MAAM,CAACQ,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,QAAE,CAE9B,KAAM,CAAAC,OAAO,CAAGX,MAAM,CAACQ,GAAG,CAAAI,gBAAA,GAAAA,gBAAA,CAAAF,sBAAA,4BAEzB,CAED,KAAM,CAAAG,KAAK,CAAGb,MAAM,CAACc,EAAE,CAAAC,gBAAA,GAAAA,gBAAA,CAAAL,sBAAA,sDAGtB,CAED,KAAM,CAAAM,GAAG,CAAGhB,MAAM,CAACQ,GAAG,CAAAS,gBAAA,GAAAA,gBAAA,CAAAP,sBAAA,yGAKrB,CAED,KAAM,CAAAQ,SAAS,CAAGlB,MAAM,CAACmB,MAAM,CAAAC,gBAAA,GAAAA,gBAAA,CAAAV,sBAAA,8HAIlBW,KAAK,EAAKA,KAAK,CAACC,IAAI,GAAK,QAAQ,EAAI,MAAM,CACjCD,KAAK,EACxBA,KAAK,CAACC,IAAI,GAAK,QAAQ,CAAG,OAAO,CAAG,aAAa,CACzCD,KAAK,EAAKA,KAAK,CAACC,IAAI,GAAK,QAAQ,EAAI,OAAO,CACvD,CAED,KAAM,CAAAC,QAAQ,CAAGvB,MAAM,CAACQ,GAAG,CAAAgB,gBAAA,GAAAA,gBAAA,CAAAd,sBAAA,QAAE,CAE7B,KAAM,CAAAe,OAAO,CAAGzB,MAAM,CAAC0B,IAAI,CAAAC,gBAAA,GAAAA,gBAAA,CAAAjB,sBAAA,kFAI1B,CAED,KAAM,CAAAkB,MAAM,CAAG5B,MAAM,CAACQ,GAAG,CAAAqB,gBAAA,GAAAA,gBAAA,CAAAnB,sBAAA,+DAGxB,CAED,KAAM,CAAAoB,IAAI,CAAG9B,MAAM,CAACQ,GAAG,CAAAuB,gBAAA,GAAAA,gBAAA,CAAArB,sBAAA,sBAEtB,CAED,KAAM,CAAAsB,OAAO,CAAGhC,MAAM,CAACQ,GAAG,CAAAyB,gBAAA,GAAAA,gBAAA,CAAAvB,sBAAA,uFAIzB,CAED,KAAM,CAAAwB,aAAa,CAAGlC,MAAM,CAACQ,GAAG,CAAA2B,gBAAA,GAAAA,gBAAA,CAAAzB,sBAAA,wCAG/B,CAED,KAAM,CAAA0B,KAAK,CAAGpC,MAAM,CAACqC,GAAG,CAAAC,iBAAA,GAAAA,iBAAA,CAAA5B,sBAAA,mEAIvB,CAED,KAAM,CAAA6B,OAAO,CAAGvC,MAAM,CAACQ,GAAG,CAAAgC,iBAAA,GAAAA,iBAAA,CAAA9B,sBAAA,2GAKzB,CAED,KAAM,CAAA+B,WAAW,CAAGzC,MAAM,CAAC0B,IAAI,CAAAgB,iBAAA,GAAAA,iBAAA,CAAAhC,sBAAA,mDAG9B,CAED,KAAM,CAAAiC,SAAS,CAAG3C,MAAM,CAAC0B,IAAI,CAAAkB,iBAAA,GAAAA,iBAAA,CAAAlC,sBAAA,0BAE5B,CAED,KAAM,CAAAmC,WAAW,CAAG7C,MAAM,CAACQ,GAAG,CAAAsC,iBAAA,GAAAA,iBAAA,CAAApC,sBAAA,uHAM7B,CAED,KAAM,CAAAqC,sBAAsB,CAAG/C,MAAM,CAACQ,GAAG,CAAAwC,iBAAA,GAAAA,iBAAA,CAAAtC,sBAAA,4EAIxC,CAED,KAAM,CAAAuC,aAAa,CAAGjD,MAAM,CAACQ,GAAG,CAAA0C,iBAAA,GAAAA,iBAAA,CAAAxC,sBAAA,mDAG/B,CAED,KAAM,CAAAyC,YAAY,CAAGnD,MAAM,CAACQ,GAAG,CAAA4C,iBAAA,GAAAA,iBAAA,CAAA1C,sBAAA,mDAG9B,CAED,KAAM,CAAA2C,EAAE,CAAGrD,MAAM,CAACsD,EAAE,CAAAC,iBAAA,GAAAA,iBAAA,CAAA7C,sBAAA,yFAKnB,CAED,KAAM,CAAA8C,OAAO,CAAGxD,MAAM,CAACQ,GAAG,CAAAiD,iBAAA,GAAAA,iBAAA,CAAA/C,sBAAA,0HAMzB,CAED,KAAM,CAAAgD,YAAY,CAAG1D,MAAM,CAACc,EAAE,CAAA6C,iBAAA,GAAAA,iBAAA,CAAAjD,sBAAA,+BAE7B,CAED,KAAM,CAAAkD,WAAW,CAAG5D,MAAM,CAACQ,GAAG,CAAAqD,iBAAA,GAAAA,iBAAA,CAAAnD,sBAAA,4HAIZW,KAAK,EAAKA,KAAK,CAACC,IAAI,GAAK,OAAO,EAAI,KAAK,CAC3CD,KAAK,EAAKA,KAAK,CAACC,IAAI,GAAK,OAAO,EAAI,MAAM,CACzD,CAED,KAAM,CAAAwC,eAAe,CAAG9D,MAAM,CAAC0B,IAAI,CAAAqC,iBAAA,GAAAA,iBAAA,CAAArD,sBAAA,QAAE,CAErC,KAAM,CAAAsD,gBAAgB,CAAGhE,MAAM,CAAC0B,IAAI,CAAAuC,iBAAA,GAAAA,iBAAA,CAAAvD,sBAAA,QAAE,CAEtC,KAAM,CAAAwD,MAAM,CAAGlE,MAAM,CAACmB,MAAM,CAAAgD,iBAAA,GAAAA,iBAAA,CAAAzD,sBAAA,wKAS3B,CAED,KAAM,CAAA0D,cAAc,CAAGpE,MAAM,CAACmB,MAAM,CAAAkD,iBAAA,GAAAA,iBAAA,CAAA3D,sBAAA,gNAUnC,CAED,KAAM,CAAA4D,SAAS,CAAGtE,MAAM,CAACQ,GAAG,CAAA+D,iBAAA,GAAAA,iBAAA,CAAA7D,sBAAA,uFAK3B,CAED,KAAM,CAAA8D,iBAAiB,CAAGxE,MAAM,CAAC0B,IAAI,CAAA+C,iBAAA,GAAAA,iBAAA,CAAA/D,sBAAA,yFAKpC,CAED,KAAM,CAAAgE,WAAW,CAAG1E,MAAM,CAACQ,GAAG,CAAAmE,iBAAA,GAAAA,iBAAA,CAAAjE,sBAAA,gIAM7B,CAED,KAAM,CAAAkE,KAAK,CAAG5E,MAAM,CAAC6E,KAAK,CAAAC,iBAAA,GAAAA,iBAAA,CAAApE,sBAAA,oIAOzB,CAED,KAAM,CAAAqE,QAAQ,CAAG/E,MAAM,CAACQ,GAAG,CAAAwE,iBAAA,GAAAA,iBAAA,CAAAtE,sBAAA,+GAO1B,CAED,KAAM,CAAAuE,UAAU,CAAGjF,MAAM,CAACQ,GAAG,CAAA0E,iBAAA,GAAAA,iBAAA,CAAAxE,sBAAA,sBAE5B,CAED,KAAM,CAAAyE,YAAY,CAAGnF,MAAM,CAACQ,GAAG,CAAA4E,iBAAA,GAAAA,iBAAA,CAAA1E,sBAAA,iNAW9B,CAED,KAAM,CAAA2E,cAAc,CAAGrF,MAAM,CAACQ,GAAG,CAAA8E,iBAAA,GAAAA,iBAAA,CAAA5E,sBAAA,oIAOhC,CAED,KAAM,CAAA6E,SAAS,CAAGvF,MAAM,CAACmB,MAAM,CAAAqE,iBAAA,GAAAA,iBAAA,CAAA9E,sBAAA,sJAQ9B,CAED,KAAM,CAAA+E,SAAS,CAAGzF,MAAM,CAACmB,MAAM,CAAAuE,iBAAA,GAAAA,iBAAA,CAAAhF,sBAAA,sJAQ9B,CAED,KAAM,CAAAiF,YAAY,CAAG3F,MAAM,CAACQ,GAAG,CAAAoF,iBAAA,GAAAA,iBAAA,CAAAlF,sBAAA,2IAO9B,CAED,KAAM,CAAAmF,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGlG,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACmG,OAAO,CAAEC,UAAU,CAAC,CAAGpG,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACqG,aAAa,CAAEC,gBAAgB,CAAC,CAAGtG,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACuG,eAAe,CAAEC,kBAAkB,CAAC,CAAGxG,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACyG,WAAW,CAAEC,cAAc,CAAC,CAAG1G,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAC2G,YAAY,CAAEC,eAAe,CAAC,CAAG5G,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAA6G,QAAQ,CAAGxG,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACyG,OAAO,CAAEC,UAAU,CAAC,CAAG/G,QAAQ,CAAC,CACrCgH,MAAM,CAAE,EAAE,CACVC,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EAAE,CACXC,OAAO,CAAE,EACX,CAAC,CAAC,CAEF,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,MAAO,CAAAF,KAAK,CAAG,CAAEG,aAAa,WAAAC,MAAA,CAAYJ,KAAK,CAAG,CAAC,CAAG,CAAC,CAAC,CAC1D,CAAC,CAED,KAAM,CAAAK,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAL,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACT,GAAI,CACF,KAAM,CAAAM,aAAa,CAAGN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACzC,KAAM,CAAAC,OAAO,CAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,aAAa,CAAC,CAAC,CAC/C,MAAO,CAAAE,OAAO,CAACI,MAAM,CACvB,CAAE,MAAOC,KAAK,CAAE,CACd,MAAO,KAAI,CACb,CACF,CACA,MAAO,KAAI,CACb,CAAC,CAED;AACA,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAAC,QAAQ,CAAGC,QAAQ,CAAC,CAAC,CAE3B;AACA,GAAID,QAAQ,EAAI,EAAE,CAAE,CAClB,MAAO,CACLE,QAAQ,CAAE,CAAC,CACXC,eAAe,CAAE,IACnB,CAAC,CACH,CAAC,IAAM,CACL;AACA,MAAO,CACLD,QAAQ,CAAE,IAAI,CACdC,eAAe,CAAE,KACnB,CAAC,CACH,CACF,CAAC,CAED;AACA,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAC,YAAY,CAAGN,iBAAiB,CAAC,CAAC,CACxC,MAAO,CAAAE,QAAQ,CAAC,CAAC,CAAGI,YAAY,CAACH,QAAQ,CAC3C,CAAC,CAED,KAAM,CAAAI,SAAS,CAAGzI,WAAW,CAAC,SAAY,CACxC,KAAM,CAAAgI,MAAM,CAAGP,cAAc,CAAC,CAAC,CAC/B,GAAI,CAACO,MAAM,CAAE,CACXhC,YAAY,CAAC,EAAE,CAAC,CAChB,OACF,CAEA,GAAI,CACFE,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAwC,QAAQ,CAAG,KAAM,CAAAxI,KAAK,CAACyI,GAAG,IAAAnB,MAAA,CAC3BoB,OAAO,CAACC,GAAG,CAACC,iBAAiB,eAAAtB,MAAA,CAAaQ,MAAM,EACnD,CAAEe,OAAO,CAAE5B,aAAa,CAAC,CAAE,CAC7B,CAAC,CACDnB,YAAY,CAAC0C,QAAQ,CAACM,IAAI,CAAC,CAC7B,CAAE,MAAOf,KAAK,CAAE,CACdgB,OAAO,CAAChB,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CAAC,OAAS,CACR/B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAgD,cAAc,CAAG,KAAAA,CAAOC,SAAS,CAAEC,QAAQ,GAAK,CACpD,KAAM,CAAApB,MAAM,CAAGP,cAAc,CAAC,CAAC,CAC/B,GAAI,CAACO,MAAM,CAAE,OAEb,GAAI,CACF,KAAM,CAAA9H,KAAK,CAACmJ,GAAG,IAAA7B,MAAA,CACVoB,OAAO,CAACC,GAAG,CAACC,iBAAiB,eAAAtB,MAAA,CAAaQ,MAAM,EACnD,CAAEmB,SAAS,CAAEC,QAAS,CAAC,CACvB,CAAEL,OAAO,CAAE5B,aAAa,CAAC,CAAE,CAC7B,CAAC,CACD,KAAM,CAAAsB,SAAS,CAAC,CAAC,CACnB,CAAE,MAAOR,KAAK,CAAE,CACdgB,OAAO,CAAChB,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,KAAM,CAAAqB,cAAc,CAAG,KAAO,CAAAH,SAAS,EAAK,CAC1C,KAAM,CAAAnB,MAAM,CAAGP,cAAc,CAAC,CAAC,CAC/B,GAAI,CAACO,MAAM,CAAE,OAEb,GAAI,CACF,KAAM,CAAA9H,KAAK,CAACqJ,MAAM,IAAA/B,MAAA,CACboB,OAAO,CAACC,GAAG,CAACC,iBAAiB,eAAAtB,MAAA,CAAaQ,MAAM,MAAAR,MAAA,CAAI2B,SAAS,EAChE,CAAEJ,OAAO,CAAE5B,aAAa,CAAC,CAAE,CAC7B,CAAC,CACD,KAAM,CAAAsB,SAAS,CAAC,CAAC,CACnB,CAAE,MAAOR,KAAK,CAAE,CACdgB,OAAO,CAAChB,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CACF,CAAC,CAEDlI,SAAS,CAAC,IAAM,CACd0I,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAe,cAAc,CAAGA,CAACL,SAAS,CAAEC,QAAQ,GAAK,CAC9C,GAAIA,QAAQ,GAAK,CAAC,CAAE,CAClBE,cAAc,CAACH,SAAS,CAAC,CAC3B,CAAC,IAAM,CACLD,cAAc,CAACC,SAAS,CAAEC,QAAQ,CAAC,CACrC,CACF,CAAC,CAED,KAAM,CAAAhB,QAAQ,CAAGA,CAAA,GAAM,CACrB,MAAO,CAAArC,SAAS,CAAC0D,MAAM,CAAC,CAACC,KAAK,CAAEC,IAAI,GAAKD,KAAK,CAAGE,UAAU,CAACD,IAAI,CAACE,KAAK,CAAC,CAAGF,IAAI,CAACP,QAAQ,CAAE,CAAC,CAAC,CAC7F,CAAC,CAED,KAAM,CAAAU,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChCpD,eAAe,CAAC,EAAE,CAAC,CACnBN,gBAAgB,CAAC,IAAI,CAAC,CAEtB,GAAI,CACF,KAAM,CAAA4B,MAAM,CAAGP,cAAc,CAAC,CAAC,CAC/B,KAAM,CAAAL,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,KAAM,CAAAyC,QAAQ,CAAGnB,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAC9CG,OAAO,CAACe,GAAG,CAAC,iBAAiB,CAAED,QAAQ,CAAC,CAExC;AACA,KAAM,CAAAE,OAAO,UAAAzC,MAAA,CAAYQ,MAAM,MAAAR,MAAA,CAAI0C,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CAC/C,KAAM,CAAAC,MAAM,CAAGC,IAAI,CAACC,KAAK,CAAC/B,aAAa,CAAC,CAAC,CAAG,GAAG,CAAC,CAAE;AAElDU,OAAO,CAACe,GAAG,CAAC,qCAAqC,CAAEI,MAAM,CAAC,CAE1D;AACA,KAAM,CAAAG,eAAe,CAAG,KAAM,CAAArK,KAAK,CAACsK,IAAI,IAAAhD,MAAA,CACnCuC,QAAQ,wCACX,CACEE,OAAO,CACPG,MACF,CAAC,CACD,CACErB,OAAO,CAAE,CACPxB,aAAa,WAAAC,MAAA,CAAYJ,KAAK,CAAE,CAChC,cAAc,CAAE,kBAClB,CAAC,CACDqD,OAAO,CAAE,KACX,CACF,CAAC,CAEDxB,OAAO,CAACe,GAAG,CAAC,yBAAyB,CAAEO,eAAe,CAACvB,IAAI,CAAC,CAE5D,GAAIuB,eAAe,CAACvB,IAAI,CAAC0B,YAAY,CAAE,CACrC;AACA;AACA,KAAM,CAAAC,eAAe,CAAG,KAAM,CAAAzK,KAAK,CAACsK,IAAI,IAAAhD,MAAA,CACnCuC,QAAQ,kCACX,CACEa,eAAe,CAAEL,eAAe,CAACvB,IAAI,CAAC4B,eACxC,CAAC,CACD,CACE7B,OAAO,CAAE,CACPxB,aAAa,WAAAC,MAAA,CAAYJ,KAAK,CAAE,CAChC,cAAc,CAAE,kBAClB,CACF,CACF,CAAC,CAED6B,OAAO,CAACe,GAAG,CAAC,oBAAoB,CAAEW,eAAe,CAAC3B,IAAI,CAAC,CAEvD,GAAI2B,eAAe,CAAC3B,IAAI,CAAC6B,OAAO,CAACC,MAAM,GAAK,WAAW,CAAE,CACvD;AACA,GAAI,CACF,KAAM,CAAA5K,KAAK,CAACqJ,MAAM,IAAA/B,MAAA,CACbuC,QAAQ,eAAAvC,MAAA,CAAaQ,MAAM,EAC9B,CACEe,OAAO,CAAE,CACPxB,aAAa,WAAAC,MAAA,CAAYJ,KAAK,CAChC,CACF,CACF,CAAC,CACD6B,OAAO,CAACe,GAAG,CAAC,2BAA2B,CAAC,CAC1C,CAAE,MAAOe,SAAS,CAAE,CAClB9B,OAAO,CAACe,GAAG,CAAC,yCAAyC,CAAEe,SAAS,CAAC,CACnE,CAEA;AACA/E,YAAY,CAAC,EAAE,CAAC,CAEhB;AACAgF,KAAK,kCAAAxD,MAAA,CAAkCyC,OAAO,CAAE,CAAC,CACjDzD,cAAc,CAAC,KAAK,CAAC,CACrBG,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAC,IAAM,CACLD,eAAe,CAAC,mCAAmC,CAAC,CACtD,CACF,CACF,CAAE,MAAOuB,KAAK,CAAE,CACdgB,OAAO,CAAChB,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CAEtC,GAAIA,KAAK,CAACS,QAAQ,CAAE,KAAAuC,oBAAA,CAClBvE,eAAe,oBAAAc,MAAA,CAAoB,EAAAyD,oBAAA,CAAAhD,KAAK,CAACS,QAAQ,CAACM,IAAI,UAAAiC,oBAAA,iBAAnBA,oBAAA,CAAqBhD,KAAK,GAAIA,KAAK,CAACS,QAAQ,CAACwC,UAAU,CAAE,CAAC,CAC/F,CAAC,IAAM,IAAIjD,KAAK,CAACkD,OAAO,CAAE,CACxBzE,eAAe,CAAC,4DAA4D,CAAC,CAC/E,CAAC,IAAM,CACLA,eAAe,CAAC,kBAAkB,CAAGuB,KAAK,CAACmD,OAAO,CAAC,CACrD,CACF,CAAC,OAAS,CACRhF,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAAiF,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAItF,SAAS,CAACuF,MAAM,GAAK,CAAC,CAAE,CAC1BN,KAAK,CAAC,oBAAoB,CAAC,CAC3B,OACF,CAEA,KAAM,CAAA5D,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACV4D,KAAK,CAAC,0BAA0B,CAAC,CACjCrE,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CAEA;AACA,GAAI,CAACN,eAAe,CAAE,CACpBC,kBAAkB,CAAC,IAAI,CAAC,CACxB,OACF,CAEA;AACA,GAAI,CAACM,OAAO,CAACE,MAAM,EAAI,CAACF,OAAO,CAACG,IAAI,EAAI,CAACH,OAAO,CAACI,KAAK,EAAI,CAACJ,OAAO,CAACK,OAAO,EAAI,CAACL,OAAO,CAACM,OAAO,CAAE,CAC9F8D,KAAK,CAAC,mCAAmC,CAAC,CAC1C,OACF,CAEA;AACAxE,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,KAAM,CAAA+E,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChC9E,UAAU,CAAC+E,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACVD,IAAI,MACP,CAACH,IAAI,EAAGC,KAAK,EACb,CAAC,CACL,CAAC,CAED,KAAM,CAAAI,sBAAsB,CAAGA,CAAA,GAAM,CACnCnF,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAED;AACA,KAAM,CAAA6B,YAAY,CAAGN,iBAAiB,CAAC,CAAC,CAExC,GAAIjC,OAAO,CAAE,CACX,mBACE5F,IAAA,CAACG,SAAS,EAAAuL,QAAA,cACRxL,KAAA,CAACK,OAAO,EAAAmL,QAAA,eACN1L,IAAA,CAACS,KAAK,EAAAiL,QAAA,CAAC,UAAQ,CAAO,CAAC,cACvB1L,IAAA,QAAK2L,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAH,QAAA,CAAC,iBAAe,CAAK,CAAC,EACpE,CAAC,CACD,CAAC,CAEhB,CAEA,mBACExL,KAAA,CAACC,SAAS,EAAAuL,QAAA,eACRxL,KAAA,CAACK,OAAO,EAAAmL,QAAA,eACN1L,IAAA,CAACS,KAAK,EAAAiL,QAAA,CAAC,UAAQ,CAAO,CAAC,cACvBxL,KAAA,CAACU,GAAG,EAAA8K,QAAA,eACF1L,IAAA,CAACc,SAAS,EAACgL,OAAO,CAAEL,sBAAuB,CAAAC,QAAA,CAAC,mBAAiB,CAAW,CAAC,cACzExL,KAAA,CAACiB,QAAQ,EAAAuK,QAAA,eACPxL,KAAA,CAACmB,OAAO,EAAAqK,QAAA,EAAC,eAAa,CAAChG,SAAS,CAACuF,MAAM,CAAC,GAAC,EAAS,CAAC,cACnDjL,IAAA,CAACqB,OAAO,EAAAqK,QAAA,CAAC,mBAAiB,CAAS,CAAC,EAC5B,CAAC,cACX1L,IAAA,CAACc,SAAS,EACRI,IAAI,CAAC,QAAQ,CACb4K,OAAO,CAAEd,cAAe,CACxBe,QAAQ,CAAErG,SAAS,CAACuF,MAAM,GAAK,CAAE,CAAAS,QAAA,CAEhC5F,aAAa,CAAG,eAAe,CAAG,cAAc,CACxC,CAAC,EACT,CAAC,cACN5F,KAAA,CAACsB,MAAM,EAAAkK,QAAA,eACL1L,IAAA,CAAC0B,IAAI,EAAAgK,QAAA,CACFhG,SAAS,CAACuF,MAAM,GAAK,CAAC,cACrB/K,KAAA,CAACgE,SAAS,EAAAwH,QAAA,eACR1L,IAAA,OAAA0L,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3B1L,IAAA,MAAA0L,QAAA,CAAG,iDAA+C,CAAG,CAAC,cACtD1L,IAAA,CAACc,SAAS,EAACgL,OAAO,CAAEL,sBAAuB,CAACE,KAAK,CAAE,CAAEK,SAAS,CAAE,MAAO,CAAE,CAAAN,QAAA,CAAC,gBAE1E,CAAW,CAAC,EACH,CAAC,CAEZhG,SAAS,CAACuG,GAAG,CAAE3C,IAAI,eACjBpJ,KAAA,QAAAwL,QAAA,eACExL,KAAA,CAAC0B,OAAO,EAAA8J,QAAA,eACNxL,KAAA,CAAC4B,aAAa,EAAA4J,QAAA,eACZ1L,IAAA,CAACgC,KAAK,EAACkK,GAAG,CAAE5C,IAAI,CAACrH,GAAG,EAAI,mDAAoD,CAAE,CAAC,cAC/E/B,KAAA,CAACiC,OAAO,EAAAuJ,QAAA,eACNxL,KAAA,CAACmC,WAAW,EAAAqJ,QAAA,eACV1L,IAAA,MAAA0L,QAAA,CAAG,UAAQ,CAAG,CAAC,IAAC,CAACpC,IAAI,CAAC6C,KAAK,EAChB,CAAC,cACdjM,KAAA,CAACqC,SAAS,EAAAmJ,QAAA,eACR1L,IAAA,MAAA0L,QAAA,CAAG,KAAG,CAAG,CAAC,IAAC,CAACpC,IAAI,CAACR,SAAS,EACjB,CAAC,CACXQ,IAAI,CAAC8C,IAAI,eACRlM,KAAA,QAAAwL,QAAA,eACE1L,IAAA,MAAA0L,QAAA,CAAG,OAAK,CAAG,CAAC,IAAC,CAACpC,IAAI,CAAC8C,IAAI,EACpB,CACN,CACA9C,IAAI,CAAC+C,KAAK,eACTnM,KAAA,QAAAwL,QAAA,eACE1L,IAAA,MAAA0L,QAAA,CAAG,QAAM,CAAG,CAAC,IAAC,CAACpC,IAAI,CAAC+C,KAAK,EACtB,CACN,EACM,CAAC,EACG,CAAC,cAChBnM,KAAA,CAACuC,WAAW,EAAAiJ,QAAA,eACVxL,KAAA,CAACyC,sBAAsB,EAAA+I,QAAA,eACrB1L,IAAA,CAACgE,cAAc,EAAC8H,OAAO,CAAEA,CAAA,GAAM3C,cAAc,CAACG,IAAI,CAACR,SAAS,CAAEQ,IAAI,CAACP,QAAQ,CAAG,CAAC,CAAE,CAAA2C,QAAA,CAAC,GAElF,CAAgB,CAAC,cACjB1L,IAAA,CAAC6C,aAAa,EAAA6I,QAAA,CAAEpC,IAAI,CAACP,QAAQ,CAAgB,CAAC,cAC9C/I,IAAA,CAACgE,cAAc,EAAC8H,OAAO,CAAEA,CAAA,GAAM3C,cAAc,CAACG,IAAI,CAACR,SAAS,CAAEQ,IAAI,CAACP,QAAQ,CAAG,CAAC,CAAE,CAAA2C,QAAA,CAAC,GAElF,CAAgB,CAAC,EACK,CAAC,cACzBxL,KAAA,CAAC6C,YAAY,EAAA2I,QAAA,EAAC,IAAE,CAAC,CAACnC,UAAU,CAACD,IAAI,CAACE,KAAK,CAAC,CAAGF,IAAI,CAACP,QAAQ,EAAEuD,OAAO,CAAC,CAAC,CAAC,EAAe,CAAC,EACzE,CAAC,EACP,CAAC,cACVtM,IAAA,CAACiD,EAAE,GAAE,CAAC,GApCEqG,IAAI,CAACiD,EAqCV,CACN,CACF,CACG,CAAC,CACN7G,SAAS,CAACuF,MAAM,CAAG,CAAC,eACnB/K,KAAA,CAACkD,OAAO,EAAAsI,QAAA,eACN1L,IAAA,CAACsD,YAAY,EAAAoI,QAAA,CAAC,eAAa,CAAc,CAAC,cAC1CxL,KAAA,CAACsD,WAAW,EAAAkI,QAAA,eACV1L,IAAA,CAAC0D,eAAe,EAAAgI,QAAA,CAAC,UAAQ,CAAiB,CAAC,cAC3CxL,KAAA,CAAC0D,gBAAgB,EAAA8H,QAAA,EAAC,IAAE,CAAC3D,QAAQ,CAAC,CAAC,CAACuE,OAAO,CAAC,CAAC,CAAC,EAAmB,CAAC,EACnD,CAAC,cAEdpM,KAAA,CAACsD,WAAW,EAAAkI,QAAA,eACVxL,KAAA,CAACwD,eAAe,EAAAgI,QAAA,EAAC,UAEf,CAACvD,YAAY,CAACF,eAAe,eAC3BjI,IAAA,CAACoE,iBAAiB,EAAAsH,QAAA,CAAC,mBAAO,CAAmB,CAC9C,EACc,CAAC,cAClB1L,IAAA,CAAC4D,gBAAgB,EAAA8H,QAAA,CACdvD,YAAY,CAACF,eAAe,CAAG,QAAQ,MAAAd,MAAA,CAAQgB,YAAY,CAACH,QAAQ,CAACsE,OAAO,CAAC,CAAC,CAAC,CAAE,CAClE,CAAC,EACR,CAAC,CAEb,CAACnE,YAAY,CAACF,eAAe,eAC5B/H,KAAA,CAACsD,WAAW,EAAAkI,QAAA,eACVxL,KAAA,CAACwD,eAAe,EAACiI,KAAK,CAAE,CAAEa,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,MAAM,CAAEI,SAAS,CAAE,QAAS,CAAE,CAAAf,QAAA,EAAC,OAC3E,CAAC,CAAC,EAAE,CAAG3D,QAAQ,CAAC,CAAC,EAAEuE,OAAO,CAAC,CAAC,CAAC,CAAC,0BACrC,EAAiB,CAAC,cAClBtM,IAAA,CAAC4D,gBAAgB,GAAmB,CAAC,EAC1B,CACd,cAED1D,KAAA,CAACsD,WAAW,EAACtC,IAAI,CAAC,OAAO,CAAAwK,QAAA,eACvB1L,IAAA,CAAC0D,eAAe,EAAAgI,QAAA,CAAC,OAAK,CAAiB,CAAC,cACxCxL,KAAA,CAAC0D,gBAAgB,EAAA8H,QAAA,EAAC,IAAE,CAACxD,aAAa,CAAC,CAAC,CAACoE,OAAO,CAAC,CAAC,CAAC,EAAmB,CAAC,EACxD,CAAC,CAGbtG,eAAe,eACd9F,KAAA,CAACoE,WAAW,EAAAoH,QAAA,eACV1L,IAAA,OAAA0L,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzB1L,IAAA,CAACwE,KAAK,EACJtD,IAAI,CAAC,MAAM,CACXkK,IAAI,CAAC,QAAQ,CACbsB,WAAW,CAAC,gBAAgB,CAC5BrB,KAAK,CAAE9E,OAAO,CAACE,MAAO,CACtBkG,QAAQ,CAAEzB,iBAAkB,CAC5B0B,QAAQ,MACT,CAAC,cACF1M,KAAA,CAACyE,QAAQ,EAAA+G,QAAA,eACP1L,IAAA,CAAC6E,UAAU,EAAA6G,QAAA,cACT1L,IAAA,CAACwE,KAAK,EACJtD,IAAI,CAAC,MAAM,CACXkK,IAAI,CAAC,MAAM,CACXsB,WAAW,CAAC,MAAM,CAClBrB,KAAK,CAAE9E,OAAO,CAACG,IAAK,CACpBiG,QAAQ,CAAEzB,iBAAkB,CAC5B0B,QAAQ,MACT,CAAC,CACQ,CAAC,cACb5M,IAAA,CAAC6E,UAAU,EAAA6G,QAAA,cACT1L,IAAA,CAACwE,KAAK,EACJtD,IAAI,CAAC,MAAM,CACXkK,IAAI,CAAC,OAAO,CACZsB,WAAW,CAAC,OAAO,CACnBrB,KAAK,CAAE9E,OAAO,CAACI,KAAM,CACrBgG,QAAQ,CAAEzB,iBAAkB,CAC5B0B,QAAQ,MACT,CAAC,CACQ,CAAC,EACL,CAAC,cACX1M,KAAA,CAACyE,QAAQ,EAAA+G,QAAA,eACP1L,IAAA,CAAC6E,UAAU,EAAA6G,QAAA,cACT1L,IAAA,CAACwE,KAAK,EACJtD,IAAI,CAAC,MAAM,CACXkK,IAAI,CAAC,SAAS,CACdsB,WAAW,CAAC,UAAU,CACtBrB,KAAK,CAAE9E,OAAO,CAACK,OAAQ,CACvB+F,QAAQ,CAAEzB,iBAAkB,CAC5B0B,QAAQ,MACT,CAAC,CACQ,CAAC,cACb5M,IAAA,CAAC6E,UAAU,EAAA6G,QAAA,cACT1L,IAAA,CAACwE,KAAK,EACJtD,IAAI,CAAC,MAAM,CACXkK,IAAI,CAAC,SAAS,CACdsB,WAAW,CAAC,SAAS,CACrBrB,KAAK,CAAE9E,OAAO,CAACM,OAAQ,CACvB8F,QAAQ,CAAEzB,iBAAkB,CAC5B0B,QAAQ,MACT,CAAC,CACQ,CAAC,EACL,CAAC,EACA,CACd,cAED5M,IAAA,CAAC8D,MAAM,EACLgI,OAAO,CAAEd,cAAe,CACxBe,QAAQ,CAAErG,SAAS,CAACuF,MAAM,GAAK,CAAC,EAAInF,aAAc,CAAA4F,QAAA,CAEjD5F,aAAa,CAAG,qBAAqB,CACrCE,eAAe,CAAG,oBAAoB,mBAAAmB,MAAA,CACpBe,aAAa,CAAC,CAAC,CAACoE,OAAO,CAAC,CAAC,CAAC,KAAG,CAC1C,CAAC,EACF,CACV,EACK,CAAC,EACF,CAAC,CAGTpG,WAAW,eACVlG,IAAA,CAAC+E,YAAY,EAAA2G,QAAA,cACXxL,KAAA,CAAC+E,cAAc,EAAAyG,QAAA,eACb1L,IAAA,OAAA0L,QAAA,CAAI,wBAAsB,CAAI,CAAC,cAC/BxL,KAAA,MAAAwL,QAAA,EAAG,iBAAe,CAACxD,aAAa,CAAC,CAAC,CAACoE,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,CAEjDlG,YAAY,eAAIpG,IAAA,CAACuF,YAAY,EAAAmG,QAAA,CAAEtF,YAAY,CAAe,CAAC,cAE5DlG,KAAA,QAAAwL,QAAA,eACE1L,IAAA,CAACmF,SAAS,EACR2G,OAAO,CAAErC,aAAc,CACvBsC,QAAQ,CAAEjG,aAAc,CAAA4F,QAAA,CAEvB5F,aAAa,CAAG,uBAAuB,CAAG,SAAS,CAC3C,CAAC,cACZ9F,IAAA,CAACqF,SAAS,EAACyG,OAAO,CAAEA,CAAA,GAAM3F,cAAc,CAAC,KAAK,CAAE,CAAAuF,QAAA,CAAC,QAEjD,CAAW,CAAC,EACT,CAAC,EACQ,CAAC,CACL,CACf,EACQ,CAAC,CAEhB,CAAC,CAED,cAAe,CAAAjG,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}