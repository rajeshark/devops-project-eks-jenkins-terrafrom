{"ast":null,"code":"import _objectSpread from\"D:/raju new 1/quickcart/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"D:/raju new 1/quickcart/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27,_templateObject28,_templateObject29,_templateObject30,_templateObject31,_templateObject32,_templateObject33,_templateObject34,_templateObject35,_templateObject36,_templateObject37,_templateObject38;import React,{useState,useEffect}from'react';import styled from'styled-components';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  background: #f8f9fa;\\n  min-height: 100vh;\\n\"])));const Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  background: white;\\n  padding: 20px;\\n  border-radius: 10px;\\n  margin-bottom: 20px;\\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n\"])));const Button=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  padding: 12px 24px;\\n  background: #667eea;\\n  color: white;\\n  border: none;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  font-weight: 600;\\n  \\n  &:hover {\\n    background: #764ba2;\\n  }\\n\"])));const OrdersTable=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  background: white;\\n  border-radius: 10px;\\n  overflow: hidden;\\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\\n\"])));const TableHeader=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 1fr 1.5fr 1fr 1fr 1fr 1.5fr;\\n  padding: 15px 20px;\\n  background: #f8f9fa;\\n  font-weight: 600;\\n  border-bottom: 1px solid #e9ecef;\\n\"])));const TableRow=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 1fr 1.5fr 1fr 1fr 1fr 1.5fr;\\n  padding: 15px 20px;\\n  border-bottom: 1px solid #e9ecef;\\n  align-items: center;\\n  \\n  &:hover {\\n    background: #f8f9fa;\\n  }\\n  \\n  &:last-child {\\n    border-bottom: none;\\n  }\\n\"])));const StatusBadge=styled.span(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  padding: 4px 12px;\\n  border-radius: 20px;\\n  font-size: 12px;\\n  font-weight: 600;\\n  \\n  &.pending { background: #fff3cd; color: #856404; }\\n  &.confirmed { background: #d1ecf1; color: #0c5460; }\\n  &.shipped { background: #d4edda; color: #155724; }\\n  &.delivered { background: #e2e3e5; color: #383d41; }\\n  &.cancelled { background: #f8d7da; color: #721c24; }\\n\"])));const Loading=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 50px;\\n  font-size: 18px;\\n  color: #666;\\n\"])));const EmptyState=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 50px;\\n  color: #666;\\n\"])));const ActionButton=styled.button(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  padding: 6px 12px;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  margin: 2px;\\n  \\n  &.primary { background: #007bff; color: white; }\\n  &.success { background: #28a745; color: white; }\\n  &.warning { background: #ffc107; color: black; }\\n  &.danger { background: #dc3545; color: white; }\\n\"])));const Modal=styled.div(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  z-index: 1000;\\n\"])));const ModalContent=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  background: white;\\n  padding: 30px;\\n  border-radius: 10px;\\n  width: 90%;\\n  max-width: 400px;\\n  text-align: center;\\n\"])));const ModalActions=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 10px;\\n  justify-content: center;\\n  margin-top: 20px;\\n\"])));const ConfirmButton=styled.button(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  padding: 10px 20px;\\n  background: #dc3545;\\n  color: white;\\n  border: none;\\n  border-radius: 5px;\\n  cursor: pointer;\\n  font-weight: 600;\\n\"])));const CancelButton=styled.button(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  padding: 10px 20px;\\n  background: #6c757d;\\n  color: white;\\n  border: none;\\n  border-radius: 5px;\\n  cursor: pointer;\\n  font-weight: 600;\\n\"])));const SuccessMessage=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  background: #d4edda;\\n  color: #155724;\\n  padding: 12px;\\n  border-radius: 6px;\\n  margin-bottom: 20px;\\n  border: 1px solid #c3e6cb;\\n\"])));const ErrorMessage=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  background: #f8d7da;\\n  color: #721c24;\\n  padding: 12px;\\n  border-radius: 6px;\\n  margin-bottom: 20px;\\n  border: 1px solid #f5c6cb;\\n\"])));const ShippingModal=styled(Modal)(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\"])));const ShippingModalContent=styled(ModalContent)(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  max-width: 500px;\\n  text-align: left;\\n\"])));const FormGroup=styled.div(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  margin-bottom: 15px;\\n\"])));const Label=styled.label(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  display: block;\\n  margin-bottom: 5px;\\n  font-weight: 600;\\n  color: #333;\\n\"])));const Input=styled.input(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 8px 12px;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  font-size: 14px;\\n  \\n  &:focus {\\n    outline: none;\\n    border-color: #667eea;\\n  }\\n\"])));const Select=styled.select(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 8px 12px;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  font-size: 14px;\\n  \\n  &:focus {\\n    outline: none;\\n    border-color: #667eea;\\n  }\\n\"])));const CustomerInfo=styled.div(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n\"])));const CustomerAvatar=styled.div(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\\n  width: 32px;\\n  height: 32px;\\n  border-radius: 50%;\\n  background: #667eea;\\n  color: white;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-weight: 600;\\n  font-size: 14px;\\n\"])));const CustomerDetails=styled.div(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\\n  text-align: left;\\n\"])));const CustomerName=styled.div(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\\n  font-weight: 600;\\n  font-size: 14px;\\n  color: #333;\\n\"])));const CustomerEmail=styled.div(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  color: #666;\\n  margin-top: 2px;\\n\"])));const CustomerPhone=styled.div(_templateObject27||(_templateObject27=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  color: #666;\\n  margin-top: 2px;\\n\"])));const CustomerAddress=styled.div(_templateObject28||(_templateObject28=_taggedTemplateLiteral([\"\\n  font-size: 11px;\\n  color: #888;\\n  margin-top: 2px;\\n  line-height: 1.3;\\n\"])));const OrderDetailsModal=styled(Modal)(_templateObject29||(_templateObject29=_taggedTemplateLiteral([\"\"])));const OrderDetailsContent=styled(ModalContent)(_templateObject30||(_templateObject30=_taggedTemplateLiteral([\"\\n  max-width: 600px;\\n  text-align: left;\\n\"])));const DetailSection=styled.div(_templateObject31||(_templateObject31=_taggedTemplateLiteral([\"\\n  margin-bottom: 20px;\\n  padding: 15px;\\n  background: #f8f9fa;\\n  border-radius: 8px;\\n\"])));const DetailRow=styled.div(_templateObject32||(_templateObject32=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  margin-bottom: 8px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid #e9ecef;\\n  \\n  &:last-child {\\n    margin-bottom: 0;\\n    padding-bottom: 0;\\n    border-bottom: none;\\n  }\\n\"])));const DetailLabel=styled.span(_templateObject33||(_templateObject33=_taggedTemplateLiteral([\"\\n  font-weight: 600;\\n  color: #333;\\n\"])));const DetailValue=styled.span(_templateObject34||(_templateObject34=_taggedTemplateLiteral([\"\\n  color: #666;\\n\"])));const ProductList=styled.div(_templateObject35||(_templateObject35=_taggedTemplateLiteral([\"\\n  margin-top: 10px;\\n\"])));const ProductItem=styled.div(_templateObject36||(_templateObject36=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  padding: 8px 0;\\n  border-bottom: 1px solid #e9ecef;\\n  \\n  &:last-child {\\n    border-bottom: none;\\n  }\\n\"])));const ProductInfo=styled.div(_templateObject37||(_templateObject37=_taggedTemplateLiteral([\"\\n  flex: 2;\\n\"])));const ProductPrice=styled.div(_templateObject38||(_templateObject38=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  text-align: right;\\n  font-weight: 600;\\n\"])));const AdminOrders=()=>{var _deleteModal$id,_shippingModal$id;const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[deleteModal,setDeleteModal]=useState(null);const[shippingModal,setShippingModal]=useState(null);const[orderDetailsModal,setOrderDetailsModal]=useState(null);const[message,setMessage]=useState('');const[error,setError]=useState('');const[shippingData,setShippingData]=useState({trackingNumber:'',carrier:'QuickCart Logistics',estimatedDelivery:''});const[userProfiles,setUserProfiles]=useState({});const navigate=useNavigate();const getAuthHeader=()=>{const token=localStorage.getItem('adminToken');return token?{Authorization:\"Bearer \".concat(token)}:{};};// ‚úÖ NEW: Function to fetch user profile data\nconst fetchUserProfile=async userId=>{try{console.log('üîç Fetching user profile for:',userId);const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/auth/profile\"),{headers:getAuthHeader(),params:{userId}});console.log('‚úÖ User profile data:',response.data);return response.data;}catch(error){console.error('‚ùå Failed to fetch user profile:',error);return null;}};// ‚úÖ NEW: Function to fetch all users for admin\nconst fetchAllUsers=async()=>{try{console.log('üîç Fetching all users...');const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/auth/users\"),{headers:getAuthHeader()});console.log('‚úÖ All users data:',response.data);return response.data;}catch(error){console.error('‚ùå Failed to fetch users:',error);return[];}};const fetchOrders=async()=>{try{setLoading(true);const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/orders/admin/all\"),{headers:getAuthHeader(),params:{includeUser:true,includeCustomer:true}});const ordersData=response.data.orders||response.data||[];console.log('üì¶ Orders loaded:',ordersData.length);// ‚úÖ NEW: Fetch user profiles for all orders\nconst userProfilesMap={};const usersList=await fetchAllUsers();if(Array.isArray(usersList)){usersList.forEach(user=>{if(user.id||user._id){var _user$profile,_user$profile2,_user$profile3;const userId=user.id||user._id;userProfilesMap[userId]={id:userId,email:user.email,username:user.username,name:((_user$profile=user.profile)===null||_user$profile===void 0?void 0:_user$profile.name)||user.name||user.username,phone:((_user$profile2=user.profile)===null||_user$profile2===void 0?void 0:_user$profile2.phone)||user.phone||'',addresses:((_user$profile3=user.profile)===null||_user$profile3===void 0?void 0:_user$profile3.addresses)||user.addresses||[]};}});}console.log('üë• User profiles map:',userProfilesMap);setUserProfiles(userProfilesMap);setOrders(ordersData);}catch(error){console.error('Error fetching orders:',error);setError('Failed to load orders');setOrders([]);}finally{setLoading(false);}};useEffect(()=>{fetchOrders();},[]);// ‚úÖ UPDATED: Helper to get customer display info with profile data\nconst getCustomerDisplayInfo=order=>{var _order$user,_order$user2,_order$user3;const userId=order.userId||((_order$user=order.user)===null||_order$user===void 0?void 0:_order$user.id)||((_order$user2=order.user)===null||_order$user2===void 0?void 0:_order$user2._id);if(userId&&userProfiles[userId]){var _userProfile$addresse;const userProfile=userProfiles[userId];return{name:userProfile.name||'Customer',email:userProfile.email||'No email',phone:userProfile.phone||'No phone',initial:(userProfile.name||'C').charAt(0).toUpperCase(),address:((_userProfile$addresse=userProfile.addresses)===null||_userProfile$addresse===void 0?void 0:_userProfile$addresse[0])||null};}// Fallback to order data\nconst email=order.userEmail||order.email||((_order$user3=order.user)===null||_order$user3===void 0?void 0:_order$user3.email)||'Customer';const nameFromEmail=email.split('@')[0];return{name:nameFromEmail,email:email,phone:'No phone',initial:nameFromEmail.charAt(0).toUpperCase(),address:order.address||null};};// ‚úÖ UPDATED: Function to send email with proper profile data\nconst sendEmailWithData=async(order,status,userEmail,customerInfo)=>{try{console.log('üì§ Preparing to send email to:',userEmail);const orderDataForEmail={id:order.id,products:order.products||order.items||[],address:customerInfo.address||order.address||order.shippingAddress||{},shippingAddress:order.shippingAddress||order.address||customerInfo.address||{},totalAmount:order.amount||order.totalAmount||0,shipping:order.shipping||0,tax:order.tax||0,trackingNumber:shippingData.trackingNumber,carrier:shippingData.carrier,estimatedDelivery:shippingData.estimatedDelivery,status:status,createdAt:order.createdAt||new Date().toISOString(),customerName:customerInfo.name,customerEmail:userEmail,customerPhone:customerInfo.phone,userEmail:userEmail};console.log('üì¶ Final email data:',orderDataForEmail);const emailData={orderData:orderDataForEmail,userEmail:userEmail,status:status};const response=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/email/shipping-update\"),emailData,{headers:getAuthHeader(),timeout:15000});console.log('‚úÖ Email sent successfully:',response.data);return true;}catch(error){console.error('‚ùå Email sending failed:',error);return false;}};// ‚úÖ UPDATED: Function to send shipping email\nconst sendShippingEmail=async(order,status)=>{try{console.log('üìß Sending shipping email for order:',order.id);const customerInfo=getCustomerDisplayInfo(order);const userEmail=customerInfo.email;if(!userEmail||userEmail==='No email'){console.error('‚ùå No valid email found for customer');return false;}console.log('‚úÖ Using customer data:',customerInfo);return await sendEmailWithData(order,status,userEmail,customerInfo);}catch(emailError){console.error('‚ùå Failed to send shipping email:',emailError);return false;}};// ‚úÖ UPDATED: Function to send cancellation email\nconst sendCancellationEmail=async order=>{try{console.log('üìß Sending cancellation email for order:',order.id);const customerInfo=getCustomerDisplayInfo(order);const userEmail=customerInfo.email;if(!userEmail||userEmail==='No email'){console.error('‚ùå No valid email found for cancellation');return false;}const emailData={orderData:{id:order.id,products:order.products||order.items||[],address:customerInfo.address||order.address||order.shippingAddress||{},totalAmount:order.amount||order.totalAmount||0,shipping:order.shipping||0,tax:order.tax||0,createdAt:order.createdAt||new Date().toISOString(),customerName:customerInfo.name,customerEmail:userEmail,customerPhone:customerInfo.phone,userEmail:userEmail},userEmail:userEmail};const response=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/email/order-cancellation\"),emailData,{headers:getAuthHeader(),timeout:15000});console.log('‚úÖ Cancellation email sent successfully:',response.data);return true;}catch(error){console.error('‚ùå Cancellation email sending failed:',error);return false;}};const updateOrderStatus=async(orderId,newStatus,order)=>{try{console.log(\"\\uD83D\\uDD04 Updating order \".concat(orderId,\" to status: \").concat(newStatus));const updateResponse=await axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/orders/\").concat(orderId,\"/status\"),{status:newStatus},{headers:getAuthHeader()});console.log('‚úÖ Order status updated in database:',updateResponse.data);let emailSent=false;let emailType='';if(newStatus==='shipped'){emailSent=await sendShippingEmail(order,'shipped');emailType='shipping confirmation';}else if(newStatus==='delivered'){emailSent=await sendShippingEmail(order,'delivered');emailType='delivery confirmation';}else if(newStatus==='cancelled'){emailSent=await sendCancellationEmail(order);emailType='cancellation';}setMessage(\"Order status updated to \".concat(newStatus).concat(emailSent?\" and \".concat(emailType,\" email sent\"):' (email failed - no user email found)'));fetchOrders();setShippingModal(null);}catch(error){var _error$response,_error$response$data;console.error('Error updating order:',error);setError(\"Failed to update order status: \".concat(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message));}};const deleteOrder=async orderId=>{try{await axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/orders/\").concat(orderId),{headers:getAuthHeader()});setMessage('Order deleted successfully');setDeleteModal(null);fetchOrders();}catch(error){console.error('Error deleting order:',error);setError('Failed to delete order');setDeleteModal(null);}};const openDeleteModal=order=>{setDeleteModal(order);};const closeDeleteModal=()=>{setDeleteModal(null);};const openShippingModal=order=>{setShippingModal(order);const trackingNumber=\"TRK\".concat(Math.random().toString(36).substr(2,9).toUpperCase());const estimatedDelivery=new Date(Date.now()+5*24*60*60*1000).toISOString().split('T')[0];setShippingData({trackingNumber:trackingNumber,carrier:'QuickCart Logistics',estimatedDelivery:estimatedDelivery});};const closeShippingModal=()=>{setShippingModal(null);setShippingData({trackingNumber:'',carrier:'QuickCart Logistics',estimatedDelivery:''});};const openOrderDetails=order=>{setOrderDetailsModal(order);};const closeOrderDetails=()=>{setOrderDetailsModal(null);};const handleShippingDataChange=(field,value)=>{setShippingData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const handleShipOrder=()=>{if(shippingModal){updateOrderStatus(shippingModal.id,'shipped',_objectSpread(_objectSpread({},shippingModal),{},{trackingNumber:shippingData.trackingNumber,carrier:shippingData.carrier}));}};const cancelOrder=async(orderId,order)=>{try{await axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/orders/\").concat(orderId,\"/status\"),{status:'cancelled'},{headers:getAuthHeader()});const emailSent=await sendCancellationEmail(order);setMessage(\"Order cancelled\".concat(emailSent?' and cancellation email sent':' (email failed - no user email found)'));fetchOrders();}catch(error){console.error('Error cancelling order:',error);setError('Failed to cancel order');}};const clearMessages=()=>{setMessage('');setError('');};// ‚úÖ UPDATED: Format address for display\nconst formatAddress=address=>{if(!address)return'No address';const parts=[address.street,address.city,address.state,address.zipCode,address.country].filter(part=>part&&part.trim()!=='');return parts.join(', ');};if(loading){return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDCCB Manage Orders\"})}),/*#__PURE__*/_jsx(Loading,{children:\"Loading orders from database...\"})]});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDCCB Manage Orders\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/admin/dashboard'),children:\"\\u2190 Back to Dashboard\"})]}),message&&/*#__PURE__*/_jsxs(SuccessMessage,{children:[\"\\u2705 \",message,/*#__PURE__*/_jsx(\"button\",{onClick:clearMessages,style:{marginLeft:'10px',background:'none',border:'none',color:'#155724',cursor:'pointer'},children:\"\\xD7\"})]}),error&&/*#__PURE__*/_jsxs(ErrorMessage,{children:[\"\\u274C \",error,/*#__PURE__*/_jsx(\"button\",{onClick:clearMessages,style:{marginLeft:'10px',background:'none',border:'none',color:'#721c24',cursor:'pointer'},children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px'},children:/*#__PURE__*/_jsx(Button,{onClick:fetchOrders,style:{marginRight:'10px'},children:\"\\uD83D\\uDD04 Refresh Orders\"})}),orders.length===0?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No orders found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Orders will appear here when customers make purchases\"})]}):/*#__PURE__*/_jsxs(OrdersTable,{children:[/*#__PURE__*/_jsxs(TableHeader,{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Order ID\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Customer Details\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Payment\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Actions\"})]}),orders.map(order=>{var _order$id;const customerInfo=getCustomerDisplayInfo(order);return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"#\",((_order$id=order.id)===null||_order$id===void 0?void 0:_order$id.slice(-8))||'N/A']}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(CustomerInfo,{children:[/*#__PURE__*/_jsx(CustomerAvatar,{children:customerInfo.initial}),/*#__PURE__*/_jsxs(CustomerDetails,{children:[/*#__PURE__*/_jsx(CustomerName,{children:customerInfo.name}),/*#__PURE__*/_jsx(CustomerEmail,{children:customerInfo.email}),/*#__PURE__*/_jsx(CustomerPhone,{children:customerInfo.phone}),customerInfo.address&&/*#__PURE__*/_jsx(CustomerAddress,{children:formatAddress(customerInfo.address)})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",order.amount||order.totalAmount||'0.00']}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(StatusBadge,{className:order.status,children:order.status})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(StatusBadge,{className:order.paymentStatus,children:order.paymentStatus})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ActionButton,{className:\"primary\",onClick:()=>openOrderDetails(order),children:\"View\"}),order.status==='confirmed'&&/*#__PURE__*/_jsx(ActionButton,{className:\"success\",onClick:()=>openShippingModal(order),children:\"Ship\"}),order.status==='shipped'&&/*#__PURE__*/_jsx(ActionButton,{className:\"warning\",onClick:()=>updateOrderStatus(order.id,'delivered',order),children:\"Deliver\"}),order.status!=='cancelled'&&order.status!=='delivered'&&/*#__PURE__*/_jsx(ActionButton,{className:\"danger\",onClick:()=>cancelOrder(order.id,order),children:\"Cancel\"}),/*#__PURE__*/_jsx(ActionButton,{className:\"danger\",onClick:()=>openDeleteModal(order),children:\"Delete\"})]})]},order.id);})]}),orderDetailsModal&&/*#__PURE__*/_jsx(OrderDetailsModal,{children:/*#__PURE__*/_jsxs(OrderDetailsContent,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCB Order Details\"}),/*#__PURE__*/_jsxs(DetailSection,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Customer Information\"}),(()=>{const customerInfo=getCustomerDisplayInfo(orderDetailsModal);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(DetailRow,{children:[/*#__PURE__*/_jsx(DetailLabel,{children:\"Name:\"}),/*#__PURE__*/_jsx(DetailValue,{children:customerInfo.name})]}),/*#__PURE__*/_jsxs(DetailRow,{children:[/*#__PURE__*/_jsx(DetailLabel,{children:\"Email:\"}),/*#__PURE__*/_jsx(DetailValue,{children:customerInfo.email})]}),/*#__PURE__*/_jsxs(DetailRow,{children:[/*#__PURE__*/_jsx(DetailLabel,{children:\"Phone:\"}),/*#__PURE__*/_jsx(DetailValue,{children:customerInfo.phone})]}),/*#__PURE__*/_jsxs(DetailRow,{children:[/*#__PURE__*/_jsx(DetailLabel,{children:\"Address:\"}),/*#__PURE__*/_jsx(DetailValue,{children:formatAddress(customerInfo.address)})]})]});})()]}),/*#__PURE__*/_jsxs(DetailSection,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Information\"}),/*#__PURE__*/_jsxs(DetailRow,{children:[/*#__PURE__*/_jsx(DetailLabel,{children:\"Order ID:\"}),/*#__PURE__*/_jsxs(DetailValue,{children:[\"#\",orderDetailsModal.id]})]}),/*#__PURE__*/_jsxs(DetailRow,{children:[/*#__PURE__*/_jsx(DetailLabel,{children:\"Status:\"}),/*#__PURE__*/_jsx(DetailValue,{children:/*#__PURE__*/_jsx(StatusBadge,{className:orderDetailsModal.status,children:orderDetailsModal.status})})]}),/*#__PURE__*/_jsxs(DetailRow,{children:[/*#__PURE__*/_jsx(DetailLabel,{children:\"Payment Status:\"}),/*#__PURE__*/_jsx(DetailValue,{children:/*#__PURE__*/_jsx(StatusBadge,{className:orderDetailsModal.paymentStatus,children:orderDetailsModal.paymentStatus})})]}),/*#__PURE__*/_jsxs(DetailRow,{children:[/*#__PURE__*/_jsx(DetailLabel,{children:\"Total Amount:\"}),/*#__PURE__*/_jsxs(DetailValue,{children:[\"$\",orderDetailsModal.amount||orderDetailsModal.totalAmount]})]}),/*#__PURE__*/_jsxs(DetailRow,{children:[/*#__PURE__*/_jsx(DetailLabel,{children:\"Order Date:\"}),/*#__PURE__*/_jsx(DetailValue,{children:new Date(orderDetailsModal.createdAt).toLocaleDateString()})]})]}),/*#__PURE__*/_jsxs(DetailSection,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Products\"}),/*#__PURE__*/_jsx(ProductList,{children:(orderDetailsModal.products||orderDetailsModal.items||[]).map((product,index)=>/*#__PURE__*/_jsxs(ProductItem,{children:[/*#__PURE__*/_jsxs(ProductInfo,{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600'},children:product.title||product.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666'},children:[\"Qty: \",product.quantity,\" \\u2022 Size: \",product.size||'One Size',\" \\u2022 Color: \",product.color||'Default']})]}),/*#__PURE__*/_jsxs(ProductPrice,{children:[\"$\",(parseFloat(product.price)*product.quantity).toFixed(2)]})]},index))})]}),/*#__PURE__*/_jsx(ModalActions,{children:/*#__PURE__*/_jsx(CancelButton,{onClick:closeOrderDetails,children:\"Close\"})})]})}),deleteModal&&/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Confirm Order Deletion\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete this order?\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Order ID:\"}),\" #\",((_deleteModal$id=deleteModal.id)===null||_deleteModal$id===void 0?void 0:_deleteModal$id.slice(-8))||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount:\"}),\" $\",deleteModal.amount||deleteModal.totalAmount]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",deleteModal.status]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#dc3545',fontWeight:'600'},children:\"\\u26A0\\uFE0F This action cannot be undone!\"}),/*#__PURE__*/_jsxs(ModalActions,{children:[/*#__PURE__*/_jsx(ConfirmButton,{onClick:()=>deleteOrder(deleteModal.id),children:\"Delete Order\"}),/*#__PURE__*/_jsx(CancelButton,{onClick:closeDeleteModal,children:\"Cancel\"})]})]})}),shippingModal&&/*#__PURE__*/_jsx(ShippingModal,{children:/*#__PURE__*/_jsxs(ShippingModalContent,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDE9A Ship Order\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Shipping order #\",((_shippingModal$id=shippingModal.id)===null||_shippingModal$id===void 0?void 0:_shippingModal$id.slice(-8))||'N/A']}),(()=>{const customerInfo=getCustomerDisplayInfo(shippingModal);return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px',padding:'10px',background:'#f8f9fa',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0',fontWeight:'600'},children:customerInfo.name}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0',fontSize:'14px'},children:customerInfo.email}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0',fontSize:'14px'},children:customerInfo.phone}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0',fontSize:'12px',color:'#666'},children:formatAddress(customerInfo.address)})]});})(),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Tracking Number *\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:shippingData.trackingNumber,onChange:e=>handleShippingDataChange('trackingNumber',e.target.value),placeholder:\"Enter tracking number\",required:true})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Carrier *\"}),/*#__PURE__*/_jsxs(Select,{value:shippingData.carrier,onChange:e=>handleShippingDataChange('carrier',e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"QuickCart Logistics\",children:\"QuickCart Logistics\"}),/*#__PURE__*/_jsx(\"option\",{value:\"FedEx\",children:\"FedEx\"}),/*#__PURE__*/_jsx(\"option\",{value:\"UPS\",children:\"UPS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USPS\",children:\"USPS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"DHL\",children:\"DHL\"})]})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Estimated Delivery *\"}),/*#__PURE__*/_jsx(Input,{type:\"date\",value:shippingData.estimatedDelivery,onChange:e=>handleShippingDataChange('estimatedDelivery',e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#e7f3ff',padding:'15px',borderRadius:'8px',marginBottom:'20px',borderLeft:'4px solid #007bff'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 10px 0',color:'#004085'},children:\"\\uD83D\\uDCE7 Email Notification\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0',fontSize:'14px',color:'#004085'},children:\"A shipping confirmation email will be sent to the customer's registered email address\"})]}),/*#__PURE__*/_jsxs(ModalActions,{children:[/*#__PURE__*/_jsx(ConfirmButton,{onClick:handleShipOrder,style:{background:'#28a745'},disabled:!shippingData.trackingNumber||!shippingData.carrier||!shippingData.estimatedDelivery,children:\"Confirm Shipping & Send Email\"}),/*#__PURE__*/_jsx(CancelButton,{onClick:closeShippingModal,children:\"Cancel\"})]})]})})]});};export default AdminOrders;","map":{"version":3,"names":["React","useState","useEffect","styled","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Container","div","_templateObject","_taggedTemplateLiteral","Header","_templateObject2","Button","button","_templateObject3","OrdersTable","_templateObject4","TableHeader","_templateObject5","TableRow","_templateObject6","StatusBadge","span","_templateObject7","Loading","_templateObject8","EmptyState","_templateObject9","ActionButton","_templateObject0","Modal","_templateObject1","ModalContent","_templateObject10","ModalActions","_templateObject11","ConfirmButton","_templateObject12","CancelButton","_templateObject13","SuccessMessage","_templateObject14","ErrorMessage","_templateObject15","ShippingModal","_templateObject16","ShippingModalContent","_templateObject17","FormGroup","_templateObject18","Label","label","_templateObject19","Input","input","_templateObject20","Select","select","_templateObject21","CustomerInfo","_templateObject22","CustomerAvatar","_templateObject23","CustomerDetails","_templateObject24","CustomerName","_templateObject25","CustomerEmail","_templateObject26","CustomerPhone","_templateObject27","CustomerAddress","_templateObject28","OrderDetailsModal","_templateObject29","OrderDetailsContent","_templateObject30","DetailSection","_templateObject31","DetailRow","_templateObject32","DetailLabel","_templateObject33","DetailValue","_templateObject34","ProductList","_templateObject35","ProductItem","_templateObject36","ProductInfo","_templateObject37","ProductPrice","_templateObject38","AdminOrders","_deleteModal$id","_shippingModal$id","orders","setOrders","loading","setLoading","deleteModal","setDeleteModal","shippingModal","setShippingModal","orderDetailsModal","setOrderDetailsModal","message","setMessage","error","setError","shippingData","setShippingData","trackingNumber","carrier","estimatedDelivery","userProfiles","setUserProfiles","navigate","getAuthHeader","token","localStorage","getItem","Authorization","concat","fetchUserProfile","userId","console","log","response","get","process","env","REACT_APP_API_URL","headers","params","data","fetchAllUsers","fetchOrders","includeUser","includeCustomer","ordersData","length","userProfilesMap","usersList","Array","isArray","forEach","user","id","_id","_user$profile","_user$profile2","_user$profile3","email","username","name","profile","phone","addresses","getCustomerDisplayInfo","order","_order$user","_order$user2","_order$user3","_userProfile$addresse","userProfile","initial","charAt","toUpperCase","address","userEmail","nameFromEmail","split","sendEmailWithData","status","customerInfo","orderDataForEmail","products","items","shippingAddress","totalAmount","amount","shipping","tax","createdAt","Date","toISOString","customerName","customerEmail","customerPhone","emailData","orderData","post","timeout","sendShippingEmail","emailError","sendCancellationEmail","updateOrderStatus","orderId","newStatus","updateResponse","put","emailSent","emailType","_error$response","_error$response$data","deleteOrder","delete","openDeleteModal","closeDeleteModal","openShippingModal","Math","random","toString","substr","now","closeShippingModal","openOrderDetails","closeOrderDetails","handleShippingDataChange","field","value","prev","_objectSpread","handleShipOrder","cancelOrder","clearMessages","formatAddress","parts","street","city","state","zipCode","country","filter","part","trim","join","children","onClick","style","marginLeft","background","border","color","cursor","marginBottom","marginRight","map","_order$id","slice","className","paymentStatus","toLocaleDateString","product","index","fontWeight","title","fontSize","quantity","size","parseFloat","price","toFixed","padding","borderRadius","margin","type","onChange","e","target","placeholder","required","borderLeft","disabled"],"sources":["D:/raju new 1/quickcart/frontend/src/admin/pages/Orders.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Container = styled.div`\r\n  padding: 20px;\r\n  background: #f8f9fa;\r\n  min-height: 100vh;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 12px 24px;\r\n  background: #667eea;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  \r\n  &:hover {\r\n    background: #764ba2;\r\n  }\r\n`;\r\n\r\nconst OrdersTable = styled.div`\r\n  background: white;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n`;\r\n\r\nconst TableHeader = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1.5fr 1fr 1fr 1fr 1.5fr;\r\n  padding: 15px 20px;\r\n  background: #f8f9fa;\r\n  font-weight: 600;\r\n  border-bottom: 1px solid #e9ecef;\r\n`;\r\n\r\nconst TableRow = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1.5fr 1fr 1fr 1fr 1.5fr;\r\n  padding: 15px 20px;\r\n  border-bottom: 1px solid #e9ecef;\r\n  align-items: center;\r\n  \r\n  &:hover {\r\n    background: #f8f9fa;\r\n  }\r\n  \r\n  &:last-child {\r\n    border-bottom: none;\r\n  }\r\n`;\r\n\r\nconst StatusBadge = styled.span`\r\n  padding: 4px 12px;\r\n  border-radius: 20px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  \r\n  &.pending { background: #fff3cd; color: #856404; }\r\n  &.confirmed { background: #d1ecf1; color: #0c5460; }\r\n  &.shipped { background: #d4edda; color: #155724; }\r\n  &.delivered { background: #e2e3e5; color: #383d41; }\r\n  &.cancelled { background: #f8d7da; color: #721c24; }\r\n`;\r\n\r\nconst Loading = styled.div`\r\n  text-align: center;\r\n  padding: 50px;\r\n  font-size: 18px;\r\n  color: #666;\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  text-align: center;\r\n  padding: 50px;\r\n  color: #666;\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  padding: 6px 12px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  margin: 2px;\r\n  \r\n  &.primary { background: #007bff; color: white; }\r\n  &.success { background: #28a745; color: white; }\r\n  &.warning { background: #ffc107; color: black; }\r\n  &.danger { background: #dc3545; color: white; }\r\n`;\r\n\r\nconst Modal = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst ModalContent = styled.div`\r\n  background: white;\r\n  padding: 30px;\r\n  border-radius: 10px;\r\n  width: 90%;\r\n  max-width: 400px;\r\n  text-align: center;\r\n`;\r\n\r\nconst ModalActions = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst ConfirmButton = styled.button`\r\n  padding: 10px 20px;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n`;\r\n\r\nconst CancelButton = styled.button`\r\n  padding: 10px 20px;\r\n  background: #6c757d;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n`;\r\n\r\nconst SuccessMessage = styled.div`\r\n  background: #d4edda;\r\n  color: #155724;\r\n  padding: 12px;\r\n  border-radius: 6px;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #c3e6cb;\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n  padding: 12px;\r\n  border-radius: 6px;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #f5c6cb;\r\n`;\r\n\r\nconst ShippingModal = styled(Modal)``;\r\n\r\nconst ShippingModalContent = styled(ModalContent)`\r\n  max-width: 500px;\r\n  text-align: left;\r\n`;\r\n\r\nconst FormGroup = styled.div`\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst Label = styled.label`\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: 600;\r\n  color: #333;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n  }\r\n`;\r\n\r\nconst Select = styled.select`\r\n  width: 100%;\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n  }\r\n`;\r\n\r\nconst CustomerInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst CustomerAvatar = styled.div`\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  background: #667eea;\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n`;\r\n\r\nconst CustomerDetails = styled.div`\r\n  text-align: left;\r\n`;\r\n\r\nconst CustomerName = styled.div`\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n  color: #333;\r\n`;\r\n\r\nconst CustomerEmail = styled.div`\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-top: 2px;\r\n`;\r\n\r\nconst CustomerPhone = styled.div`\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-top: 2px;\r\n`;\r\n\r\nconst CustomerAddress = styled.div`\r\n  font-size: 11px;\r\n  color: #888;\r\n  margin-top: 2px;\r\n  line-height: 1.3;\r\n`;\r\n\r\nconst OrderDetailsModal = styled(Modal)``;\r\n\r\nconst OrderDetailsContent = styled(ModalContent)`\r\n  max-width: 600px;\r\n  text-align: left;\r\n`;\r\n\r\nconst DetailSection = styled.div`\r\n  margin-bottom: 20px;\r\n  padding: 15px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n`;\r\n\r\nconst DetailRow = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 8px;\r\n  padding-bottom: 8px;\r\n  border-bottom: 1px solid #e9ecef;\r\n  \r\n  &:last-child {\r\n    margin-bottom: 0;\r\n    padding-bottom: 0;\r\n    border-bottom: none;\r\n  }\r\n`;\r\n\r\nconst DetailLabel = styled.span`\r\n  font-weight: 600;\r\n  color: #333;\r\n`;\r\n\r\nconst DetailValue = styled.span`\r\n  color: #666;\r\n`;\r\n\r\nconst ProductList = styled.div`\r\n  margin-top: 10px;\r\n`;\r\n\r\nconst ProductItem = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 8px 0;\r\n  border-bottom: 1px solid #e9ecef;\r\n  \r\n  &:last-child {\r\n    border-bottom: none;\r\n  }\r\n`;\r\n\r\nconst ProductInfo = styled.div`\r\n  flex: 2;\r\n`;\r\n\r\nconst ProductPrice = styled.div`\r\n  flex: 1;\r\n  text-align: right;\r\n  font-weight: 600;\r\n`;\r\n\r\nconst AdminOrders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [deleteModal, setDeleteModal] = useState(null);\r\n  const [shippingModal, setShippingModal] = useState(null);\r\n  const [orderDetailsModal, setOrderDetailsModal] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [shippingData, setShippingData] = useState({\r\n    trackingNumber: '',\r\n    carrier: 'QuickCart Logistics',\r\n    estimatedDelivery: ''\r\n  });\r\n  const [userProfiles, setUserProfiles] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  const getAuthHeader = () => {\r\n    const token = localStorage.getItem('adminToken');\r\n    return token ? { Authorization: `Bearer ${token}` } : {};\r\n  };\r\n\r\n  // ‚úÖ NEW: Function to fetch user profile data\r\n  const fetchUserProfile = async (userId) => {\r\n    try {\r\n      console.log('üîç Fetching user profile for:', userId);\r\n      \r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_API_URL}/api/auth/profile`,\r\n        { \r\n          headers: getAuthHeader(),\r\n          params: { userId }\r\n        }\r\n      );\r\n      \r\n      console.log('‚úÖ User profile data:', response.data);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('‚ùå Failed to fetch user profile:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // ‚úÖ NEW: Function to fetch all users for admin\r\n  const fetchAllUsers = async () => {\r\n    try {\r\n      console.log('üîç Fetching all users...');\r\n      \r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_API_URL}/api/auth/users`,\r\n        { headers: getAuthHeader() }\r\n      );\r\n      \r\n      console.log('‚úÖ All users data:', response.data);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('‚ùå Failed to fetch users:', error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_API_URL}/api/orders/admin/all`,\r\n        { \r\n          headers: getAuthHeader(),\r\n          params: {\r\n            includeUser: true,\r\n            includeCustomer: true\r\n          }\r\n        }\r\n      );\r\n      \r\n      const ordersData = response.data.orders || response.data || [];\r\n      console.log('üì¶ Orders loaded:', ordersData.length);\r\n      \r\n      // ‚úÖ NEW: Fetch user profiles for all orders\r\n      const userProfilesMap = {};\r\n      const usersList = await fetchAllUsers();\r\n      \r\n      if (Array.isArray(usersList)) {\r\n        usersList.forEach(user => {\r\n          if (user.id || user._id) {\r\n            const userId = user.id || user._id;\r\n            userProfilesMap[userId] = {\r\n              id: userId,\r\n              email: user.email,\r\n              username: user.username,\r\n              name: user.profile?.name || user.name || user.username,\r\n              phone: user.profile?.phone || user.phone || '',\r\n              addresses: user.profile?.addresses || user.addresses || []\r\n            };\r\n          }\r\n        });\r\n      }\r\n      \r\n      console.log('üë• User profiles map:', userProfilesMap);\r\n      setUserProfiles(userProfilesMap);\r\n      setOrders(ordersData);\r\n    } catch (error) {\r\n      console.error('Error fetching orders:', error);\r\n      setError('Failed to load orders');\r\n      setOrders([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  // ‚úÖ UPDATED: Helper to get customer display info with profile data\r\n  const getCustomerDisplayInfo = (order) => {\r\n    const userId = order.userId || order.user?.id || order.user?._id;\r\n    \r\n    if (userId && userProfiles[userId]) {\r\n      const userProfile = userProfiles[userId];\r\n      return {\r\n        name: userProfile.name || 'Customer',\r\n        email: userProfile.email || 'No email',\r\n        phone: userProfile.phone || 'No phone',\r\n        initial: (userProfile.name || 'C').charAt(0).toUpperCase(),\r\n        address: userProfile.addresses?.[0] || null\r\n      };\r\n    }\r\n    \r\n    // Fallback to order data\r\n    const email = order.userEmail || order.email || order.user?.email || 'Customer';\r\n    const nameFromEmail = email.split('@')[0];\r\n    \r\n    return {\r\n      name: nameFromEmail,\r\n      email: email,\r\n      phone: 'No phone',\r\n      initial: nameFromEmail.charAt(0).toUpperCase(),\r\n      address: order.address || null\r\n    };\r\n  };\r\n\r\n  // ‚úÖ UPDATED: Function to send email with proper profile data\r\n  const sendEmailWithData = async (order, status, userEmail, customerInfo) => {\r\n    try {\r\n      console.log('üì§ Preparing to send email to:', userEmail);\r\n\r\n      const orderDataForEmail = {\r\n        id: order.id,\r\n        products: order.products || order.items || [],\r\n        address: customerInfo.address || order.address || order.shippingAddress || {},\r\n        shippingAddress: order.shippingAddress || order.address || customerInfo.address || {},\r\n        totalAmount: order.amount || order.totalAmount || 0,\r\n        shipping: order.shipping || 0,\r\n        tax: order.tax || 0,\r\n        trackingNumber: shippingData.trackingNumber,\r\n        carrier: shippingData.carrier,\r\n        estimatedDelivery: shippingData.estimatedDelivery,\r\n        status: status,\r\n        createdAt: order.createdAt || new Date().toISOString(),\r\n        customerName: customerInfo.name,\r\n        customerEmail: userEmail,\r\n        customerPhone: customerInfo.phone,\r\n        userEmail: userEmail\r\n      };\r\n\r\n      console.log('üì¶ Final email data:', orderDataForEmail);\r\n\r\n      const emailData = {\r\n        orderData: orderDataForEmail,\r\n        userEmail: userEmail,\r\n        status: status\r\n      };\r\n\r\n      const response = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/api/email/shipping-update`,\r\n        emailData,\r\n        { \r\n          headers: getAuthHeader(),\r\n          timeout: 15000\r\n        }\r\n      );\r\n\r\n      console.log('‚úÖ Email sent successfully:', response.data);\r\n      return true;\r\n    } catch (error) {\r\n      console.error('‚ùå Email sending failed:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // ‚úÖ UPDATED: Function to send shipping email\r\n  const sendShippingEmail = async (order, status) => {\r\n    try {\r\n      console.log('üìß Sending shipping email for order:', order.id);\r\n      \r\n      const customerInfo = getCustomerDisplayInfo(order);\r\n      const userEmail = customerInfo.email;\r\n\r\n      if (!userEmail || userEmail === 'No email') {\r\n        console.error('‚ùå No valid email found for customer');\r\n        return false;\r\n      }\r\n\r\n      console.log('‚úÖ Using customer data:', customerInfo);\r\n      return await sendEmailWithData(order, status, userEmail, customerInfo);\r\n        \r\n    } catch (emailError) {\r\n      console.error('‚ùå Failed to send shipping email:', emailError);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // ‚úÖ UPDATED: Function to send cancellation email\r\n  const sendCancellationEmail = async (order) => {\r\n    try {\r\n      console.log('üìß Sending cancellation email for order:', order.id);\r\n      \r\n      const customerInfo = getCustomerDisplayInfo(order);\r\n      const userEmail = customerInfo.email;\r\n\r\n      if (!userEmail || userEmail === 'No email') {\r\n        console.error('‚ùå No valid email found for cancellation');\r\n        return false;\r\n      }\r\n\r\n      const emailData = {\r\n        orderData: {\r\n          id: order.id,\r\n          products: order.products || order.items || [],\r\n          address: customerInfo.address || order.address || order.shippingAddress || {},\r\n          totalAmount: order.amount || order.totalAmount || 0,\r\n          shipping: order.shipping || 0,\r\n          tax: order.tax || 0,\r\n          createdAt: order.createdAt || new Date().toISOString(),\r\n          customerName: customerInfo.name,\r\n          customerEmail: userEmail,\r\n          customerPhone: customerInfo.phone,\r\n          userEmail: userEmail\r\n        },\r\n        userEmail: userEmail\r\n      };\r\n\r\n      const response = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/api/email/order-cancellation`,\r\n        emailData,\r\n        { \r\n          headers: getAuthHeader(),\r\n          timeout: 15000\r\n        }\r\n      );\r\n\r\n      console.log('‚úÖ Cancellation email sent successfully:', response.data);\r\n      return true;\r\n    } catch (error) {\r\n      console.error('‚ùå Cancellation email sending failed:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const updateOrderStatus = async (orderId, newStatus, order) => {\r\n    try {\r\n      console.log(`üîÑ Updating order ${orderId} to status: ${newStatus}`);\r\n      \r\n      const updateResponse = await axios.put(\r\n        `${process.env.REACT_APP_API_URL}/api/orders/${orderId}/status`,\r\n        { status: newStatus },\r\n        { headers: getAuthHeader() }\r\n      );\r\n\r\n      console.log('‚úÖ Order status updated in database:', updateResponse.data);\r\n\r\n      let emailSent = false;\r\n      let emailType = '';\r\n      \r\n      if (newStatus === 'shipped') {\r\n        emailSent = await sendShippingEmail(order, 'shipped');\r\n        emailType = 'shipping confirmation';\r\n      } else if (newStatus === 'delivered') {\r\n        emailSent = await sendShippingEmail(order, 'delivered');\r\n        emailType = 'delivery confirmation';\r\n      } else if (newStatus === 'cancelled') {\r\n        emailSent = await sendCancellationEmail(order);\r\n        emailType = 'cancellation';\r\n      }\r\n\r\n      setMessage(`Order status updated to ${newStatus}${emailSent ? ` and ${emailType} email sent` : ' (email failed - no user email found)'}`);\r\n      fetchOrders();\r\n      setShippingModal(null);\r\n    } catch (error) {\r\n      console.error('Error updating order:', error);\r\n      setError(`Failed to update order status: ${error.response?.data?.error || error.message}`);\r\n    }\r\n  };\r\n\r\n  const deleteOrder = async (orderId) => {\r\n    try {\r\n      await axios.delete(\r\n        `${process.env.REACT_APP_API_URL}/api/orders/${orderId}`,\r\n        { headers: getAuthHeader() }\r\n      );\r\n      setMessage('Order deleted successfully');\r\n      setDeleteModal(null);\r\n      fetchOrders();\r\n    } catch (error) {\r\n      console.error('Error deleting order:', error);\r\n      setError('Failed to delete order');\r\n      setDeleteModal(null);\r\n    }\r\n  };\r\n\r\n  const openDeleteModal = (order) => {\r\n    setDeleteModal(order);\r\n  };\r\n\r\n  const closeDeleteModal = () => {\r\n    setDeleteModal(null);\r\n  };\r\n\r\n  const openShippingModal = (order) => {\r\n    setShippingModal(order);\r\n    const trackingNumber = `TRK${Math.random().toString(36).substr(2, 9).toUpperCase()}`;\r\n    const estimatedDelivery = new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];\r\n    \r\n    setShippingData({\r\n      trackingNumber: trackingNumber,\r\n      carrier: 'QuickCart Logistics',\r\n      estimatedDelivery: estimatedDelivery\r\n    });\r\n  };\r\n\r\n  const closeShippingModal = () => {\r\n    setShippingModal(null);\r\n    setShippingData({\r\n      trackingNumber: '',\r\n      carrier: 'QuickCart Logistics',\r\n      estimatedDelivery: ''\r\n    });\r\n  };\r\n\r\n  const openOrderDetails = (order) => {\r\n    setOrderDetailsModal(order);\r\n  };\r\n\r\n  const closeOrderDetails = () => {\r\n    setOrderDetailsModal(null);\r\n  };\r\n\r\n  const handleShippingDataChange = (field, value) => {\r\n    setShippingData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleShipOrder = () => {\r\n    if (shippingModal) {\r\n      updateOrderStatus(shippingModal.id, 'shipped', {\r\n        ...shippingModal,\r\n        trackingNumber: shippingData.trackingNumber,\r\n        carrier: shippingData.carrier\r\n      });\r\n    }\r\n  };\r\n\r\n  const cancelOrder = async (orderId, order) => {\r\n    try {\r\n      await axios.put(\r\n        `${process.env.REACT_APP_API_URL}/api/orders/${orderId}/status`,\r\n        { status: 'cancelled' },\r\n        { headers: getAuthHeader() }\r\n      );\r\n\r\n      const emailSent = await sendCancellationEmail(order);\r\n\r\n      setMessage(`Order cancelled${emailSent ? ' and cancellation email sent' : ' (email failed - no user email found)'}`);\r\n      fetchOrders();\r\n    } catch (error) {\r\n      console.error('Error cancelling order:', error);\r\n      setError('Failed to cancel order');\r\n    }\r\n  };\r\n\r\n  const clearMessages = () => {\r\n    setMessage('');\r\n    setError('');\r\n  };\r\n\r\n  // ‚úÖ UPDATED: Format address for display\r\n  const formatAddress = (address) => {\r\n    if (!address) return 'No address';\r\n    \r\n    const parts = [\r\n      address.street,\r\n      address.city,\r\n      address.state,\r\n      address.zipCode,\r\n      address.country\r\n    ].filter(part => part && part.trim() !== '');\r\n    \r\n    return parts.join(', ');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container>\r\n        <Header>\r\n          <h1>üìã Manage Orders</h1>\r\n        </Header>\r\n        <Loading>Loading orders from database...</Loading>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <h1>üìã Manage Orders</h1>\r\n        <Button onClick={() => navigate('/admin/dashboard')}>\r\n          ‚Üê Back to Dashboard\r\n        </Button>\r\n      </Header>\r\n\r\n      {message && (\r\n        <SuccessMessage>\r\n          ‚úÖ {message}\r\n          <button onClick={clearMessages} style={{ marginLeft: '10px', background: 'none', border: 'none', color: '#155724', cursor: 'pointer' }}>\r\n            √ó\r\n          </button>\r\n        </SuccessMessage>\r\n      )}\r\n\r\n      {error && (\r\n        <ErrorMessage>\r\n          ‚ùå {error}\r\n          <button onClick={clearMessages} style={{ marginLeft: '10px', background: 'none', border: 'none', color: '#721c24', cursor: 'pointer' }}>\r\n            √ó\r\n          </button>\r\n        </ErrorMessage>\r\n      )}\r\n\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <Button onClick={fetchOrders} style={{marginRight: '10px'}}>\r\n          üîÑ Refresh Orders\r\n        </Button>\r\n      </div>\r\n\r\n      {orders.length === 0 ? (\r\n        <EmptyState>\r\n          <h3>No orders found</h3>\r\n          <p>Orders will appear here when customers make purchases</p>\r\n        </EmptyState>\r\n      ) : (\r\n        <OrdersTable>\r\n          <TableHeader>\r\n            <div>Order ID</div>\r\n            <div>Customer Details</div>\r\n            <div>Amount</div>\r\n            <div>Status</div>\r\n            <div>Payment</div>\r\n            <div>Actions</div>\r\n          </TableHeader>\r\n          \r\n          {orders.map((order) => {\r\n            const customerInfo = getCustomerDisplayInfo(order);\r\n            return (\r\n              <TableRow key={order.id}>\r\n                <div>#{order.id?.slice(-8) || 'N/A'}</div>\r\n                <div>\r\n                  <CustomerInfo>\r\n                    <CustomerAvatar>\r\n                      {customerInfo.initial}\r\n                    </CustomerAvatar>\r\n                    <CustomerDetails>\r\n                      <CustomerName>{customerInfo.name}</CustomerName>\r\n                      <CustomerEmail>{customerInfo.email}</CustomerEmail>\r\n                      <CustomerPhone>{customerInfo.phone}</CustomerPhone>\r\n                      {customerInfo.address && (\r\n                        <CustomerAddress>\r\n                          {formatAddress(customerInfo.address)}\r\n                        </CustomerAddress>\r\n                      )}\r\n                    </CustomerDetails>\r\n                  </CustomerInfo>\r\n                </div>\r\n                <div>${order.amount || order.totalAmount || '0.00'}</div>\r\n                <div>\r\n                  <StatusBadge className={order.status}>\r\n                    {order.status}\r\n                  </StatusBadge>\r\n                </div>\r\n                <div>\r\n                  <StatusBadge className={order.paymentStatus}>\r\n                    {order.paymentStatus}\r\n                  </StatusBadge>\r\n                </div>\r\n                <div>\r\n                  <ActionButton \r\n                    className=\"primary\"\r\n                    onClick={() => openOrderDetails(order)}\r\n                  >\r\n                    View\r\n                  </ActionButton>\r\n                  \r\n                  {order.status === 'confirmed' && (\r\n                    <ActionButton \r\n                      className=\"success\"\r\n                      onClick={() => openShippingModal(order)}\r\n                    >\r\n                      Ship\r\n                    </ActionButton>\r\n                  )}\r\n                  \r\n                  {order.status === 'shipped' && (\r\n                    <ActionButton \r\n                      className=\"warning\"\r\n                      onClick={() => updateOrderStatus(order.id, 'delivered', order)}\r\n                    >\r\n                      Deliver\r\n                    </ActionButton>\r\n                  )}\r\n                  \r\n                  {order.status !== 'cancelled' && order.status !== 'delivered' && (\r\n                    <ActionButton \r\n                      className=\"danger\"\r\n                      onClick={() => cancelOrder(order.id, order)}\r\n                    >\r\n                      Cancel\r\n                    </ActionButton>\r\n                  )}\r\n                  \r\n                  <ActionButton \r\n                    className=\"danger\"\r\n                    onClick={() => openDeleteModal(order)}\r\n                  >\r\n                    Delete\r\n                  </ActionButton>\r\n                </div>\r\n              </TableRow>\r\n            );\r\n          })}\r\n        </OrdersTable>\r\n      )}\r\n\r\n      {/* Order Details Modal */}\r\n      {orderDetailsModal && (\r\n        <OrderDetailsModal>\r\n          <OrderDetailsContent>\r\n            <h3>üìã Order Details</h3>\r\n            \r\n            <DetailSection>\r\n              <h4>Customer Information</h4>\r\n              {(() => {\r\n                const customerInfo = getCustomerDisplayInfo(orderDetailsModal);\r\n                return (\r\n                  <>\r\n                    <DetailRow>\r\n                      <DetailLabel>Name:</DetailLabel>\r\n                      <DetailValue>{customerInfo.name}</DetailValue>\r\n                    </DetailRow>\r\n                    <DetailRow>\r\n                      <DetailLabel>Email:</DetailLabel>\r\n                      <DetailValue>{customerInfo.email}</DetailValue>\r\n                    </DetailRow>\r\n                    <DetailRow>\r\n                      <DetailLabel>Phone:</DetailLabel>\r\n                      <DetailValue>{customerInfo.phone}</DetailValue>\r\n                    </DetailRow>\r\n                    <DetailRow>\r\n                      <DetailLabel>Address:</DetailLabel>\r\n                      <DetailValue>{formatAddress(customerInfo.address)}</DetailValue>\r\n                    </DetailRow>\r\n                  </>\r\n                );\r\n              })()}\r\n            </DetailSection>\r\n\r\n            <DetailSection>\r\n              <h4>Order Information</h4>\r\n              <DetailRow>\r\n                <DetailLabel>Order ID:</DetailLabel>\r\n                <DetailValue>#{orderDetailsModal.id}</DetailValue>\r\n              </DetailRow>\r\n              <DetailRow>\r\n                <DetailLabel>Status:</DetailLabel>\r\n                <DetailValue>\r\n                  <StatusBadge className={orderDetailsModal.status}>\r\n                    {orderDetailsModal.status}\r\n                  </StatusBadge>\r\n                </DetailValue>\r\n              </DetailRow>\r\n              <DetailRow>\r\n                <DetailLabel>Payment Status:</DetailLabel>\r\n                <DetailValue>\r\n                  <StatusBadge className={orderDetailsModal.paymentStatus}>\r\n                    {orderDetailsModal.paymentStatus}\r\n                  </StatusBadge>\r\n                </DetailValue>\r\n              </DetailRow>\r\n              <DetailRow>\r\n                <DetailLabel>Total Amount:</DetailLabel>\r\n                <DetailValue>${orderDetailsModal.amount || orderDetailsModal.totalAmount}</DetailValue>\r\n              </DetailRow>\r\n              <DetailRow>\r\n                <DetailLabel>Order Date:</DetailLabel>\r\n                <DetailValue>\r\n                  {new Date(orderDetailsModal.createdAt).toLocaleDateString()}\r\n                </DetailValue>\r\n              </DetailRow>\r\n            </DetailSection>\r\n\r\n            <DetailSection>\r\n              <h4>Products</h4>\r\n              <ProductList>\r\n                {(orderDetailsModal.products || orderDetailsModal.items || []).map((product, index) => (\r\n                  <ProductItem key={index}>\r\n                    <ProductInfo>\r\n                      <div style={{ fontWeight: '600' }}>{product.title || product.name}</div>\r\n                      <div style={{ fontSize: '12px', color: '#666' }}>\r\n                        Qty: {product.quantity} ‚Ä¢ Size: {product.size || 'One Size'} ‚Ä¢ Color: {product.color || 'Default'}\r\n                      </div>\r\n                    </ProductInfo>\r\n                    <ProductPrice>\r\n                      ${(parseFloat(product.price) * product.quantity).toFixed(2)}\r\n                    </ProductPrice>\r\n                  </ProductItem>\r\n                ))}\r\n              </ProductList>\r\n            </DetailSection>\r\n\r\n            <ModalActions>\r\n              <CancelButton onClick={closeOrderDetails}>\r\n                Close\r\n              </CancelButton>\r\n            </ModalActions>\r\n          </OrderDetailsContent>\r\n        </OrderDetailsModal>\r\n      )}\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      {deleteModal && (\r\n        <Modal>\r\n          <ModalContent>\r\n            <h3>Confirm Order Deletion</h3>\r\n            <p>Are you sure you want to delete this order?</p>\r\n            <p><strong>Order ID:</strong> #{deleteModal.id?.slice(-8) || 'N/A'}</p>\r\n            <p><strong>Amount:</strong> ${deleteModal.amount || deleteModal.totalAmount}</p>\r\n            <p><strong>Status:</strong> {deleteModal.status}</p>\r\n            <p style={{ color: '#dc3545', fontWeight: '600' }}>\r\n              ‚ö†Ô∏è This action cannot be undone!\r\n            </p>\r\n            <ModalActions>\r\n              <ConfirmButton onClick={() => deleteOrder(deleteModal.id)}>\r\n                Delete Order\r\n              </ConfirmButton>\r\n              <CancelButton onClick={closeDeleteModal}>\r\n                Cancel\r\n              </CancelButton>\r\n            </ModalActions>\r\n          </ModalContent>\r\n        </Modal>\r\n      )}\r\n\r\n      {/* Shipping Modal */}\r\n      {shippingModal && (\r\n        <ShippingModal>\r\n          <ShippingModalContent>\r\n            <h3>üöö Ship Order</h3>\r\n            <p>Shipping order #{shippingModal.id?.slice(-8) || 'N/A'}</p>\r\n            \r\n            {(() => {\r\n              const customerInfo = getCustomerDisplayInfo(shippingModal);\r\n              return (\r\n                <div style={{ marginBottom: '15px', padding: '10px', background: '#f8f9fa', borderRadius: '6px' }}>\r\n                  <p style={{ margin: '5px 0', fontWeight: '600' }}>{customerInfo.name}</p>\r\n                  <p style={{ margin: '5px 0', fontSize: '14px' }}>{customerInfo.email}</p>\r\n                  <p style={{ margin: '5px 0', fontSize: '14px' }}>{customerInfo.phone}</p>\r\n                  <p style={{ margin: '5px 0', fontSize: '12px', color: '#666' }}>\r\n                    {formatAddress(customerInfo.address)}\r\n                  </p>\r\n                </div>\r\n              );\r\n            })()}\r\n            \r\n            <FormGroup>\r\n              <Label>Tracking Number *</Label>\r\n              <Input\r\n                type=\"text\"\r\n                value={shippingData.trackingNumber}\r\n                onChange={(e) => handleShippingDataChange('trackingNumber', e.target.value)}\r\n                placeholder=\"Enter tracking number\"\r\n                required\r\n              />\r\n            </FormGroup>\r\n            \r\n            <FormGroup>\r\n              <Label>Carrier *</Label>\r\n              <Select\r\n                value={shippingData.carrier}\r\n                onChange={(e) => handleShippingDataChange('carrier', e.target.value)}\r\n                required\r\n              >\r\n                <option value=\"QuickCart Logistics\">QuickCart Logistics</option>\r\n                <option value=\"FedEx\">FedEx</option>\r\n                <option value=\"UPS\">UPS</option>\r\n                <option value=\"USPS\">USPS</option>\r\n                <option value=\"DHL\">DHL</option>\r\n              </Select>\r\n            </FormGroup>\r\n            \r\n            <FormGroup>\r\n              <Label>Estimated Delivery *</Label>\r\n              <Input\r\n                type=\"date\"\r\n                value={shippingData.estimatedDelivery}\r\n                onChange={(e) => handleShippingDataChange('estimatedDelivery', e.target.value)}\r\n                required\r\n              />\r\n            </FormGroup>\r\n            \r\n            <div style={{ \r\n              background: '#e7f3ff', \r\n              padding: '15px', \r\n              borderRadius: '8px', \r\n              marginBottom: '20px',\r\n              borderLeft: '4px solid #007bff'\r\n            }}>\r\n              <h4 style={{ margin: '0 0 10px 0', color: '#004085' }}>üìß Email Notification</h4>\r\n              <p style={{ margin: '5px 0', fontSize: '14px', color: '#004085' }}>\r\n                A shipping confirmation email will be sent to the customer's registered email address\r\n              </p>\r\n            </div>\r\n            \r\n            <ModalActions>\r\n              <ConfirmButton \r\n                onClick={handleShipOrder}\r\n                style={{ background: '#28a745' }}\r\n                disabled={!shippingData.trackingNumber || !shippingData.carrier || !shippingData.estimatedDelivery}\r\n              >\r\n                Confirm Shipping & Send Email\r\n              </ConfirmButton>\r\n              <CancelButton onClick={closeShippingModal}>\r\n                Cancel\r\n              </CancelButton>\r\n            </ModalActions>\r\n          </ShippingModalContent>\r\n        </ShippingModal>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AdminOrders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}